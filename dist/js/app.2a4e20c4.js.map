{"version":3,"file":"js/app.2a4e20c4.js","mappings":"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","sources":["webpack://music-sequencer/./src/App.vue","webpack://music-sequencer/./src/components/PatternEditor.vue","webpack://music-sequencer/./src/components/PianoRoll.vue","webpack://music-sequencer/./src/components/HelpMenu.vue","webpack://music-sequencer/./src/components/HelpMenu.vue?d290","webpack://music-sequencer/./src/components/PianoRoll.vue?b086","webpack://music-sequencer/./src/components/Sequencer.vue","webpack://music-sequencer/./src/components/PatternEditor.vue?415c","webpack://music-sequencer/./src/App.vue?7ccd","webpack://music-sequencer/./src/main.js","webpack://music-sequencer/webpack/bootstrap","webpack://music-sequencer/webpack/runtime/chunk loaded","webpack://music-sequencer/webpack/runtime/compat get default export","webpack://music-sequencer/webpack/runtime/define property getters","webpack://music-sequencer/webpack/runtime/global","webpack://music-sequencer/webpack/runtime/hasOwnProperty shorthand","webpack://music-sequencer/webpack/runtime/publicPath","webpack://music-sequencer/webpack/runtime/jsonp chunk loading","webpack://music-sequencer/webpack/startup"],"sourcesContent":["<template>\n  <img alt=\"Vue logo\" src=\"./assets/logo.png\">\n  <div id=\"app\">\n    <PatternEditor />\n  </div>\n</template>\n\n<script>\nimport PatternEditor from './components/PatternEditor.vue';\nimport PianoRoll from './components/PianoRoll.vue';\n\nexport default {\n  name: 'App',\n  components: {\n    PatternEditor\n  }\n}\n</script>\n\n<style>\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n  }\n</style>\n","<template>\r\n    <div class=\"pattern-editor\">\r\n        <div class=\"scroll-container\" ref=\"scrollContainer\">\r\n            <PianoRoll />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport PianoRoll from './PianoRoll.vue';\r\nimport Sequencer from './Sequencer.vue';\r\n\r\nexport default {\r\n    name: 'PatternEditor',\r\n    components: {\r\n        PianoRoll\r\n    },\r\n    setup() {\r\n        const scrollContainer = ref(null);\r\n\r\n        return {\r\n            scrollContainer\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.pattern-editor {\r\n    height: 100%;\r\n    width: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\n.scroll-container {\r\n    height: 100%;\r\n    width: 100%;\r\n    overflow: auto;\r\n    display: flex;\r\n}\r\n</style>\r\n","<template>\r\n    <div class=\"piano-container\">\r\n        <button class=\"play-button\" @click=\"playSequence\">Play Sequence</button>\r\n        <label class=\"loop-wrapper\">\r\n            Loop:\r\n            <input type=\"checkbox\" v-model=\"loopSong\"/>\r\n        </label>\r\n        <HelpMenu />\r\n        <div class=\"controls\">\r\n            <div class=\"instrument-selector\">\r\n                <label for=\"instrument-select\">Select Instrument: </label>\r\n                <select id=\"instrument-select\" v-model=\"selectedInstrument\" @change=\"changeInstrument\">\r\n                    <option v-for=\"(instrument, index) in instruments\" :key=\"index\" :value=\"instrument\">\r\n                        {{ instrument.name }}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n            <div class=\"tempo-selector\">\r\n                <label for=\"tempo-select\">Tempo: </label>\r\n                <input type=\"number\" id=\"tempo-select\" v-model.number=\"tempo\" min=\"40\" max=\"240\">\r\n            </div>\r\n        </div>\r\n        <div class=\"piano-roll\" ref=\"pianoRoll\">\r\n            <div class=\"piano-keys\">\r\n                <!-- Generate piano keys for multiple octaves -->\r\n                <div v-for=\"octave in octaves\" :key=\"octave\" class=\"octave\">\r\n                    <div class=\"keys-wrapper\">\r\n                        <!-- Keys should be in reverse order to have higher notes at the top -->\r\n                        <div v-for=\"(note, index) in notes.slice().reverse()\" :key=\"note.name\"\r\n                            :class=\"['piano-key', note.isBlack ? 'black-key' : 'white-key']\"\r\n                            @mousedown=\"startNote(0, note, octave)\"\r\n                            @mouseover=\"mouseOverNote(0, note, octave)\"\r\n                            @mouseup=\"endNote(0, note, octave)\"\r\n                            @mouseleave=\"mouseLeaveNote(0, note, octave)\"\r\n                            :style=\"note.isBlack ? { zIndex: 1 } : {}\">\r\n                            {{ note.name + octave }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"ruler\" ref=\"ruler\" \r\n                @mousedown=\"startMarkerDrag\"\r\n                :style=\"{ width: 'calc( 10% + ' + gridSpan + 'px )' }\">\r\n                <div\r\n                    v-for=\"index in Math.ceil(gridSpan / 256)\"\r\n                    :key=\"index\"\r\n                    class=\"ruler-tick-label\"\r\n                    :style=\"{ left: `calc(${(index - 1) * 256}px)` }\"\r\n                    >\r\n                    {{ index }}\r\n                </div>\r\n                <div class=\"marker-replay-triangle\" :style=\"{ left: markerReplayPosition + 'px' }\"></div>\r\n                <div class=\"marker-wrapper\" :style=\"{ left: markerPosition + 'px' }\">\r\n                    <div class=\"marker-triangle\"></div>\r\n                    <div class=\"marker-line\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"grid-wrapper\">\r\n                <div class=\"grid\" ref=\"grid\" :style=\"{ width: gridSpan + 'px' }\" @mousedown.left=\"handleGridClick\" @contextmenu.prevent=\"startNoteRemove\">\r\n                    <div v-for=\"note in notesInGrid\" :key=\"note.id\" class=\"note\"\r\n                        :style=\"{\r\n                            left: note.left + 'px',\r\n                            top: note.top + 'px',\r\n                            width: note.width + 'px',\r\n                            height: gridHeight + 'px',\r\n                            backgroundColor: note.highlighted ? 'rgba(255, 0, 0, 0.5)' : 'rgba(0, 120, 255, 0.5)'\r\n                        }\"\r\n                        @mousedown.left=\"startDrag(note, $event)\"\r\n                        @mouseup.left=\"endDrag\"\r\n                        @mousedown.right.prevent=\"removeNote(note)\">\r\n                        <div class=\"resize-handle\" @mousedown=\"startResize(note, $event)\"></div>\r\n                        {{ note.name }}\r\n                    </div>\r\n                    <div v-if=\"isSelecting\" class=\"selection-rect\" :style=\"rectangleStyle\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, watchEffect, computed } from 'vue';\r\nimport { Synthetizer, MIDIBuilder, writeMIDIFile, Sequencer } from \"spessasynth_lib\";\r\nimport HelpMenu from '@/components/HelpMenu.vue'\r\nimport { _ } from 'core-js';\r\n\r\nexport default {\r\n    name: 'PianoRoll',\r\n    components: {\r\n        HelpMenu\r\n    },\r\n    setup() {\r\n        const root = process.env.NODE_ENV === 'production' ? '../MabiMML/' : '../';\r\n        const pianoRoll = ref(null);\r\n        const grid = ref(null);\r\n        const synth = ref(null);\r\n        const context = ref(null);\r\n        const isMouseDown = ref(false);\r\n        const selectedInstrument = ref({ name: 'Piano', sf2: root + 'soundfonts/piano.sf2' });\r\n        const midiBuilder = ref(null);\r\n        const tempo = ref(120);\r\n        const loopSong = ref(false);\r\n\r\n        const instruments = ref([\r\n            { name: 'Piano', sf2: root + 'soundfonts/piano.sf2' },\r\n            { name: 'Harp', sf2: root + 'soundfonts/harp.sf2' },\r\n            { name: 'Lyre', sf2: root + 'soundfonts/lyre.sf2' },\r\n            { name: 'Lute', sf2: root + 'soundfonts/lute.sf2' },\r\n            { name: 'Ukulele', sf2: root + 'soundfonts/ukulele.sf2' },\r\n            { name: 'Mandolin', sf2: root + 'soundfonts/mandolin.sf2' },\r\n            { name: 'Electric Guitar', sf2: root + 'soundfonts/electric_guitar.sf2' },\r\n            { name: 'Violin', sf2: root + 'soundfonts/violin.sf2' },\r\n            { name: 'Cello', sf2: root + 'soundfonts/cello.sf2' },\r\n            { name: 'Flute', sf2: root + 'soundfonts/flute.sf2' },\r\n            { name: 'Whistle', sf2: root + 'soundfonts/whistle.sf2' },\r\n            { name: 'Chalumeau', sf2: root + 'soundfonts/chalumeau.sf2' },\r\n            { name: 'Roncadora', sf2: root + 'soundfonts/roncadora.sf2' },\r\n            { name: 'Physis Tuba', sf2: root + 'soundfonts/tuba.sf2' },\r\n            { name: 'Festival Lute', sf2: root + 'soundfonts/festival_lute.sf2' },\r\n            { name: 'Festival Ukulele', sf2: root + 'soundfonts/festival_ukulele.sf2' },\r\n            { name: 'Festival Mandolin', sf2: root + 'soundfonts/festival_mandolin.sf2' },\r\n            { name: 'Fest/Tuned Flute', sf2: root + 'soundfonts/festival_flute.sf2' },\r\n            { name: 'Fest/Tuned Whistle', sf2: root + 'soundfonts/festival_whistle.sf2' },\r\n            { name: 'Tuned Violin', sf2: root + 'soundfonts/tuned_violin.sf2' },\r\n            { name: 'Tuned Cello', sf2: root + 'soundfonts/tuned_cello.sf2' },\r\n            { name: 'Drum Kit', sf2: root + 'soundfonts/drum_kit.sf2' },\r\n            { name: 'Bass Drum', sf2: root + 'soundfonts/bass_drum.sf2' },\r\n            { name: 'Snare Drum', sf2: root + 'soundfonts/snare_drum.sf2' },\r\n            { name: 'Cymbals', sf2: root + 'soundfonts/cymbals.sf2' },\r\n            { name: 'Hand Chimes', sf2: root + 'soundfonts/hand_chimes.sf2' },\r\n            { name: 'Male Voice', sf2: root + 'soundfonts/male_voice.sf2' },\r\n            { name: 'Male Chorus', sf2: root + 'soundfonts/male_chorus.sf2' },\r\n            { name: 'Female Voice', sf2: root + 'soundfonts/female_voice.sf2' },\r\n            { name: 'Female Chorus', sf2: root + 'soundfonts/female_chorus.sf2' },\r\n        ]);\r\n\r\n        let currentNoteLength = ref(255/16);\r\n        const gridWidth = 16;\r\n        const gridHeight = 24;\r\n        const notesInGrid = ref([]);\r\n        const draggingNotes = ref([]);\r\n        const resizingNotes = ref([]);\r\n        const startX = ref(0);\r\n        const startY = ref(0);\r\n        const startLeft = ref(0);\r\n        const startTop = ref(0);\r\n        const startWidth = ref(0);\r\n        const gridSpan = ref(window.innerWidth);\r\n\r\n        const scrollX = ref(0);\r\n\r\n        const selectedNotes = ref([]);\r\n        const isSelecting = ref(false);\r\n        const currentX = ref(0);\r\n        const currentY = ref(0);\r\n\r\n        const ruler = ref(null);\r\n        const markerPosition = ref(0);\r\n        const markerReplayPosition = ref(0);\r\n        const seq = ref(null);\r\n        const isPlaying = ref(false);\r\n\r\n        const rectangleStyle = computed(() => ({\r\n            left: `${Math.min(startX.value, currentX.value)}px`,\r\n            top: `${Math.min(startY.value, currentY.value)}px`,\r\n            width: `${Math.abs(currentX.value - startX.value)}px`,\r\n            height: `${Math.abs(currentY.value - startY.value)}px`,\r\n            backgroundColor: 'rgba(0, 100, 255, 0.3)', // Transparent blue\r\n            border: '1px solid rgba(0, 100, 255, 0.5)' // Optional border\r\n        }));\r\n\r\n        const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\r\n        const blackNotes = ['C#', 'D#', 'F#', 'G#', 'A#'];\r\n        const notes = ref(noteNames.map((name, index) => ({\r\n            name: name,\r\n            index: index,\r\n            isBlack: blackNotes.includes(name)\r\n        })));\r\n        const octaves = ref([0, 1, 2, 3, 4, 5, 6, 7, 8]);\r\n\r\n        watchEffect(() => {\r\n            const maxRightPosition = Math.max(...notesInGrid.value.map(note => note.left + note.width), 0);\r\n            gridSpan.value = Math.max(maxRightPosition + window.innerWidth, window.innerWidth);\r\n        });\r\n\r\n        const loadSoundFont = async (instrument) => {\r\n            try {\r\n                const response = await fetch(instrument.sf2);\r\n                const soundFontArrayBuffer = await response.arrayBuffer();\r\n                return soundFontArrayBuffer;\r\n            } catch (error) {\r\n                console.error(\"Failed to load SoundFont:\", error);\r\n                return null;\r\n            }\r\n        };\r\n\r\n        onMounted(async () => {\r\n            try {\r\n\r\n                const gridWrapper = document.querySelector('.grid-wrapper');\r\n                if (gridWrapper) {\r\n                    gridWrapper.addEventListener('scroll', updateRuler);\r\n                    updateRuler();\r\n                }\r\n\r\n                document.addEventListener('keydown', handleKeyPress);\r\n                context.value = new AudioContext();\r\n                await context.value.audioWorklet.addModule(root + \"worklet_processor.min.js\");\r\n                const soundFontArrayBuffer = await loadSoundFont(selectedInstrument.value);\r\n                if (!soundFontArrayBuffer) return;\r\n                synth.value = new Synthetizer(context.value.destination, soundFontArrayBuffer, true, undefined, {chorusEnabled: false, reverbEnabled: false});\r\n                await synth.value.isReady;\r\n\r\n            } catch (error) {\r\n                console.error(\"Error initializing sequencer or synthesizer:\", error);\r\n            }\r\n        });\r\n\r\n        const startMarkerDrag = (event) => {\r\n            updateMarkerPos(event.clientX, event.altKey, true);\r\n            document.addEventListener('mousemove', onMarkerDrag);\r\n            document.addEventListener('mouseup', onMarkerDragEnd);\r\n        }\r\n\r\n        const onMarkerDrag = (event) => {\r\n            updateMarkerPos(event.clientX, event.altKey, true);\r\n        }\r\n\r\n        const onMarkerDragEnd = async () => {\r\n            if (isPlaying.value) {\r\n                await playSequence();\r\n            }\r\n            document.removeEventListener('mousemove', onMarkerDrag);\r\n            document.removeEventListener('mouseup', onMarkerDragEnd);\r\n        }\r\n\r\n        let markerInterval;\r\n\r\n        async function startMarkerAnim() {\r\n            isPlaying.value = true;\r\n            doMarkerAnim();\r\n        }\r\n\r\n        function doMarkerAnim() {\r\n            function tick() {\r\n                //console.log(markerPosition.value);\r\n                markerPosition.value += 8;\r\n            }\r\n            clearInterval(markerInterval);\r\n            tick();\r\n            markerInterval = setInterval(tick, (125/2)/(tempo.value/120));\r\n        }\r\n\r\n        const stopMarkerAnim = () => {\r\n            clearInterval(markerInterval);\r\n            isPlaying.value = false;\r\n        }\r\n\r\n        const updateMarkerPos = (clientX, altKey, fromClick) => {\r\n            if (ruler.value) {\r\n                const rulerRect = ruler.value.getBoundingClientRect();\r\n                let newPos = clientX - rulerRect.left;\r\n\r\n                if (!altKey) {\r\n                    newPos = Math.round(newPos / gridWidth) * gridWidth;\r\n                }\r\n\r\n                newPos = Math.max(0, Math.min(gridSpan.value, newPos));\r\n\r\n                markerPosition.value = newPos;\r\n                if (fromClick) {\r\n                    markerReplayPosition.value = newPos;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        function handleKeyPress(event) {\r\n            if (event.key === 'Backspace' || event.key === 'Delete') {\r\n                for (const note of selectedNotes.value) {\r\n                    removeNote(note);\r\n                }\r\n            }\r\n            if (event.code === 'Space') {\r\n                event.preventDefault();\r\n                if (isPlaying.value) {\r\n                    isPlaying.value = false;\r\n                    seq.value.stop();\r\n                    stopMarkerAnim();\r\n                    if (!event.ctrlKey) {\r\n                        markerPosition.value = markerReplayPosition.value;\r\n                    }\r\n                } else {\r\n                    playSequence();\r\n                }\r\n            } else if (event.key === 'a' && event.ctrlKey) {\r\n                event.preventDefault();\r\n                for (const note of notesInGrid.value) {\r\n                    selectNote(note);\r\n                }\r\n            }\r\n        }\r\n\r\n        function updateRuler() {\r\n            const gridWrapper = document.querySelector('.grid-wrapper');\r\n            const ruler = document.querySelector('.ruler');\r\n            if (gridWrapper && ruler) {\r\n                scrollX.value = gridWrapper.scrollLeft;\r\n                ruler.style.left = -scrollX.value + 'px'; // Adjust ruler's left position\r\n            }\r\n        }\r\n\r\n        const playSequence = async () => {\r\n            try {\r\n                midiBuilder.value = new MIDIBuilder(\"untitled\", 480, tempo.value);\r\n                //midiBuilder.value.addEvent(0, 0, 0xC0, [selectedInstrument.value.program - 1]);\r\n                \r\n                await context.value.resume();\r\n                if (!synth.value) return;\r\n\r\n                let notesAdded = 0;\r\n                notesInGrid.value.forEach(note => {\r\n                    if (note.left+note.width >= markerPosition.value) {\r\n                        const channel = 0;\r\n                        const pitch = noteNames.indexOf(note.name.slice(0, -1)) + 12 * (parseInt(note.name.slice(-1)) + 1);\r\n                        // Conversion from pixels to time.\r\n                        const noteStartTime = note.left/gridWidth*120;\r\n                        const noteDuration = note.width/gridWidth*120;\r\n                        const markerTime = markerPosition.value/gridWidth*120;\r\n                        const startTime = Math.max(noteStartTime, markerTime)-markerTime;\r\n                        const duration = Math.min(noteDuration, noteStartTime+noteDuration-markerTime);\r\n\r\n                        midiBuilder.value.addNoteOn(startTime, 0, channel, pitch, 127);\r\n                        midiBuilder.value.addNoteOff(startTime + duration, 0, channel, pitch);\r\n                        notesAdded++;\r\n                    }\r\n                });\r\n\r\n                if (notesAdded === 0) {\r\n                    return;\r\n                }\r\n\r\n                midiBuilder.value.flush();\r\n\r\n                const b = await(writeMIDIFile(midiBuilder.value));\r\n                seq.value = new Sequencer([{binary: b}], synth.value);\r\n                seq.value.loop = false;\r\n                await synth.value.isReady;\r\n                seq.value.skipToFirstNoteOn = false;\r\n                seq.value.addOnSongEndedEvent(() => {\r\n                    stopMarkerAnim();\r\n                    markerPosition.value = markerReplayPosition.value;\r\n                    if (loopSong.value) {\r\n                        markerPosition.value = 0;\r\n                        playSequence();\r\n                    }\r\n                }, 'test2');\r\n                await seq.value.play();\r\n                startMarkerAnim();\r\n            } catch (error) {\r\n                console.error(\"Error playing sequence: \", error);\r\n            }\r\n        };\r\n\r\n        const startNote = async (channel, note, octave) => {\r\n            try {\r\n                context.value.resume();\r\n                await synth.value.isReady;\r\n                synth.value.noteOn(channel, note.index + 12 * (octave + 1), 127, false);\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        };\r\n\r\n        const endNote = async (channel, note, octave) => {\r\n            try {\r\n                await synth.value.isReady;\r\n                if (synth.value) {\r\n                    synth.value.noteOff(channel, note.index + 12 * (octave + 1));\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        };\r\n\r\n        const mouseOverNote = (channel, note, octave) => {\r\n            if (isMouseDown.value && draggingNotes.value.length === 0 && resizingNotes.value.length === 0) {\r\n                startNote(channel, note, octave);\r\n            }\r\n        };\r\n\r\n        const mouseLeaveNote = (channel, note, octave) => {\r\n            if (isMouseDown.value && draggingNotes.value.length === 0 && resizingNotes.value.length === 0) {\r\n                endNote(channel, note, octave);\r\n            }\r\n        };\r\n\r\n        const changeInstrument = async () => {\r\n            if (synth.value) {\r\n\r\n            }\r\n            if (synth.value && selectedInstrument.value) {\r\n                const soundFontArrayBuffer = await loadSoundFont(selectedInstrument.value);\r\n\r\n                if (!soundFontArrayBuffer) return;\r\n\r\n                //context.value = new AudioContext();\r\n                //await context.value.audioWorklet.addModule(\"../worklet_processor.min.js\");\r\n\r\n                //synth.value = new Synthetizer(context.value.destination, soundFontArrayBuffer, true, undefined, {chorusEnabled: false, reverbEnabled: false});\r\n                \r\n                await synth.value.soundfontManager.reloadManager(soundFontArrayBuffer);\r\n                await synth.value.isReady;\r\n            }\r\n        };\r\n\r\n        const startPositions = new Map();\r\n\r\n        const startDrag = (note, event, placeNote = true) => {\r\n            event.preventDefault();\r\n            if (event.button === 0 && resizingNotes.value.length === 0) { // Ensure we're dragging with left button\r\n                if (note.highlighted) {\r\n                    draggingNotes.value = selectedNotes.value;\r\n                } else {\r\n                    clearSelection();\r\n                    draggingNotes.value.push(note);\r\n                }\r\n\r\n                if (event.shiftKey && placeNote) {\r\n                    for (const note of draggingNotes.value) {\r\n                        notesInGrid.value.push({\r\n                            id: notesInGrid.value.length + Date.now(),\r\n                            name: note.name,\r\n                            left: note.left,\r\n                            top: note.top,\r\n                            width: note.width,\r\n                            highlighted: false\r\n                        });\r\n                    }\r\n                }\r\n\r\n                for (const draggingNote of draggingNotes.value) {\r\n                    startPositions.set(draggingNote.id, {\r\n                        x: event.clientX,\r\n                        y: event.clientY,\r\n                        left: draggingNote.left,\r\n                        top: draggingNote.top\r\n                    });\r\n                }\r\n\r\n                currentNoteLength.value = (note.width) / gridWidth;\r\n                document.addEventListener('mousemove', onDrag);\r\n                document.addEventListener('mouseup', endDrag);\r\n            }\r\n        };\r\n\r\n        const onDrag = (event) => {\r\n            if (draggingNotes.value && resizingNotes.value.length === 0) {\r\n\r\n                let outOfBounds = false;\r\n                const newPositions = [];\r\n\r\n                for (const note of draggingNotes.value) {\r\n\r\n                    const startPos = startPositions.get(note.id);\r\n                    if (!startPos) continue;\r\n\r\n                    const dx = event.clientX - startPos.x;\r\n                    const dy = event.clientY - startPos.y;\r\n\r\n                    let newLeft = 0;\r\n\r\n                    if (event.altKey || (note.highlighted && (note.width+1) % 16 !== 0)) {\r\n                        newLeft = Math.round((startPos.left + dx) / (gridWidth/4)) * (gridWidth/4);\r\n                    } else {\r\n                        newLeft = Math.round((startPos.left + dx) / gridWidth) * gridWidth;\r\n                    }\r\n                    let newTop = Math.round((startPos.top + dy) / gridHeight) * gridHeight;\r\n                    \r\n                    if (newLeft < 0 || newTop < 0 || newTop > 2568) {\r\n                        outOfBounds = true;\r\n                        break; // Exit loop if any note is out of bounds\r\n                    }\r\n\r\n                    newPositions.push({ note, newLeft, newTop });\r\n\r\n                }\r\n\r\n                if (outOfBounds) return;\r\n\r\n                for (const { note, newLeft, newTop } of newPositions) {\r\n\r\n                    note.left = newLeft;\r\n                    note.top = newTop;\r\n\r\n                    const number = (1284-(note.top/2))/144;\r\n                    const noteName = noteNames[number * 12 % 12] + \"\" + Math.floor(number);\r\n                    if (note.name != noteName && draggingNotes.value.length === 1) {\r\n                        startNote(0, {name: noteName, index: number * 12 % 12}, Math.floor(number))\r\n                        endNote(0, {name: noteName, index: number * 12 % 12}, Math.floor(number))\r\n                    }\r\n                    note.name = noteName;\r\n                    \r\n                }\r\n            }\r\n        };\r\n\r\n        const endDrag = () => {\r\n            draggingNotes.value = [];\r\n            document.removeEventListener('mousemove', onDrag);\r\n            document.removeEventListener('mouseup', endDrag);\r\n            startPositions.clear();\r\n        };\r\n\r\n        const startResizeData = new Map();\r\n\r\n        const startResize = (note, event) => {\r\n            event.preventDefault();\r\n            if (event.button === 0) { // Ensure we're resizing with the left button\r\n                resizingNotes.value = [];\r\n                startX.value = event.clientX;\r\n                startResizeData.clear(); // Clear previous data\r\n\r\n                if (note.highlighted) {\r\n                    // If note is highlighted, prepare to resize all selected notes\r\n                    selectedNotes.value.forEach(n => {\r\n                        startResizeData.set(n.id, { width: n.width, startX: event.clientX });\r\n                    });\r\n                    resizingNotes.value = selectedNotes.value;\r\n                } else {\r\n                    // If note is not highlighted, resize only this note\r\n                    clearSelection();\r\n                    startResizeData.set(note.id, { width: note.width, startX: event.clientX });\r\n                    resizingNotes.value = [note];\r\n                }\r\n                \r\n                document.addEventListener('mousemove', onResize);\r\n                document.addEventListener('mouseup', endResize);\r\n            }\r\n        };\r\n\r\n        const onResize = (event) => {\r\n            if (resizingNotes.value.length > 0) {\r\n                let allInBounds = true;\r\n\r\n                const newWidths = [];\r\n\r\n                resizingNotes.value.forEach(note => {\r\n                    const startData = startResizeData.get(note.id);\r\n                    if (!startData) return;\r\n\r\n                    const dx = event.clientX - startData.startX;\r\n                    let newWidth = 0;\r\n                    if (event.altKey) {\r\n                        newWidth = Math.round((startData.width + dx) / (gridWidth/4)) * (gridWidth/4) - 1;\r\n                    } else {\r\n                        newWidth = Math.round((startData.width + dx) / gridWidth) * gridWidth - 1;\r\n                    }\r\n\r\n                    // Check if newWidth is valid for the note\r\n                    if (newWidth < gridWidth - 1 && !event.altKey) {\r\n                        allInBounds = false;\r\n                        return;\r\n                    }\r\n\r\n                    newWidths.push({ note, newWidth })\r\n\r\n                });\r\n\r\n                // If any note was resized to an invalid width, stop resizing\r\n                if (allInBounds) {\r\n                    for (const { note, newWidth } of newWidths) {\r\n                        note.width = newWidth;\r\n                        currentNoteLength.value = (newWidth) / gridWidth;\r\n                    };\r\n                }\r\n            }\r\n        };\r\n\r\n        const endResize = () => {\r\n            resizingNotes.value = [];\r\n            startResizeData.clear();\r\n            document.removeEventListener('mousemove', onResize);\r\n            document.removeEventListener('mouseup', endResize);\r\n        }\r\n\r\n        const handleGridClick = (event) => {\r\n            if (event.ctrlKey && draggingNotes.value.length <= 0) {\r\n                if (!event.shiftKey)\r\n                    clearSelection();\r\n                startSelection(event);\r\n            } else {\r\n                startPlacingNote(event);\r\n            }\r\n        }\r\n\r\n        function clearSelection() {\r\n            selectedNotes.value.forEach((note) => {\r\n                note.highlighted = false;\r\n            });\r\n            selectedNotes.value = [];\r\n        }\r\n\r\n        const startSelection = (event) => {\r\n            event.preventDefault();\r\n            isSelecting.value = true;\r\n            const rect = grid.value.getBoundingClientRect();\r\n            startX.value = event.clientX - rect.left;\r\n            startY.value = event.clientY - rect.top;\r\n            currentX.value = event.clientX - rect.left;\r\n            currentY.value = event.clientY - rect.top;\r\n            document.addEventListener('mousemove', onSelectionMove);\r\n            document.addEventListener('mouseup', onSelectionEnd);\r\n        };\r\n\r\n        const onSelectionMove = (event) => {\r\n            if (isSelecting.value) {\r\n                const rect = grid.value.getBoundingClientRect();\r\n                currentX.value = event.clientX - rect.left;\r\n                currentY.value = event.clientY - rect.top;\r\n                // This is where we add the logic to highlight the notes that might be selected (or we can select them I dont really care)\r\n            }\r\n        };\r\n\r\n        const onSelectionEnd = () => {\r\n            if (isSelecting.value) {\r\n                isSelecting.value = false;\r\n                document.removeEventListener('mousemove', onSelectionMove);\r\n                document.removeEventListener('mouseup', onSelectionEnd);\r\n                // This is where we add the logic to actually select the notes\r\n                checkIntersections();\r\n            }\r\n        };\r\n\r\n        function checkIntersections() {\r\n            const selectionRect = {\r\n                left: Math.min(startX.value, currentX.value),\r\n                top: Math.min(startY.value, currentY.value),\r\n                right: Math.max(startX.value, currentX.value),\r\n                bottom: Math.max(startY.value, currentY.value),\r\n            };\r\n\r\n            notesInGrid.value.forEach(note => {\r\n                const itemRect = {\r\n                    left: note.left,\r\n                    top: note.top,\r\n                    right: note.left + note.width,\r\n                    bottom: note.top + gridHeight,\r\n                };   \r\n\r\n                if (intersects(selectionRect, itemRect)) {\r\n                    //console.log(note.name + ' intersects with selection.');\r\n                    selectNote(note);\r\n                }\r\n            });\r\n\r\n        };\r\n\r\n        function selectNote(note) {\r\n            if (!selectedNotes.value.includes(note)) {\r\n                selectedNotes.value.push(note);\r\n                note.highlighted = true;\r\n            }\r\n        }\r\n\r\n        function intersects(rect1, rect2) {\r\n            return !(rect2.left >= rect1.right ||\r\n                    rect2.right <= rect1.left ||\r\n                    rect2.top >= rect1.bottom ||\r\n                    rect2.bottom <= rect1.top);\r\n        }\r\n\r\n\r\n        const startPlacingNote = (event) => {\r\n            if (draggingNotes.value.length > 0 || resizingNotes.value.length > 0) {\r\n                return;\r\n            }\r\n\r\n            const gridElement = grid.value;\r\n            const rect = gridElement.getBoundingClientRect();\r\n            const x = event.clientX - rect.left + gridElement.scrollLeft;\r\n            const y = event.clientY - rect.top + gridElement.scrollTop;\r\n\r\n            const left = Math.round((x - gridWidth / 2) / gridWidth) * gridWidth;\r\n            const top = Math.round((y - gridHeight / 2) / gridHeight) * gridHeight;\r\n\r\n            const number = (1284-(top/2))/144;\r\n            const noteName = noteNames[number * 12 % 12] + \"\" + Math.floor(number);\r\n            startNote(0, {name: noteName, index: number * 12 % 12}, Math.floor(number));\r\n            endNote(0, {name: noteName, index: number * 12 % 12}, Math.floor(number));\r\n\r\n            const existingNote = notesInGrid.value.find(note =>\r\n                note.left === left && note.top === top\r\n            );\r\n\r\n            if (!existingNote) {\r\n                clearSelection();\r\n                const id = notesInGrid.value.length + Date.now();\r\n                notesInGrid.value.push({\r\n                    id: id,\r\n                    name: noteName,\r\n                    left: left,\r\n                    top: top,\r\n                    width: gridWidth * currentNoteLength.value,\r\n                    highlighted: false\r\n                });\r\n                startDrag(notesInGrid.value.find(note => note.id == id), event, false);\r\n            } else {\r\n                startDrag(existingNote, event);\r\n            }\r\n        };\r\n\r\n        const startNoteRemove = (note, event) => {\r\n            if (event.button === 2) { // Ensure we're removing with right button\r\n                removeNote(note);\r\n            }\r\n        };\r\n\r\n        const removeNote = (note) => {\r\n            if (selectedNotes.value.includes(note)) {\r\n                selectedNotes.value = selectedNotes.value.filter(n => n.id !== note.id);\r\n            }\r\n            notesInGrid.value = notesInGrid.value.filter(n => n.id !== note.id);\r\n        };\r\n\r\n        document.addEventListener('mousedown', (event) => {\r\n            isMouseDown.value = true;\r\n        });\r\n\r\n        document.addEventListener('mouseup', () => {\r\n            isMouseDown.value = false;\r\n        });\r\n\r\n        return {\r\n            notes,\r\n            octaves,\r\n            startNote,\r\n            endNote,\r\n            mouseOverNote,\r\n            mouseLeaveNote,\r\n            instruments,\r\n            selectedInstrument,\r\n            changeInstrument,\r\n            pianoRoll,\r\n            grid,\r\n            notesInGrid,\r\n            startDrag,\r\n            endDrag,\r\n            startPlacingNote,\r\n            removeNote,\r\n            gridWidth,\r\n            gridHeight,\r\n            gridSpan,\r\n            startResize,\r\n            endResize,\r\n            onResize,\r\n            currentNoteLength,\r\n            playSequence,\r\n            tempo,\r\n            handleGridClick,\r\n            isSelecting,\r\n            rectangleStyle,\r\n            startMarkerDrag,\r\n            markerPosition,\r\n            markerReplayPosition,\r\n            ruler,\r\n            loopSong\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.piano-container {\r\n    position: fixed;\r\n    /* Fix to the left side of the screen */\r\n    top: 0;\r\n    left: 0;\r\n    height: 100%;\r\n    /* Full height */\r\n    width: 100%;\r\n    /* Width of the piano roll */\r\n    background-color: #ddd;\r\n}\r\n\r\n.instrument-selector {\r\n    padding: 10px;\r\n    background-color: #f0f0f0;\r\n    border-bottom: 1px solid #ccc;\r\n}\r\n\r\n.piano-roll {\r\n    height: 100vh;\r\n    flex-wrap: wrap;\r\n    display: flex;\r\n    overflow-y: auto;\r\n    box-sizing: border-box;\r\n    padding-bottom: 36px;\r\n}\r\n\r\n.piano-keys {\r\n    padding-top: 30px;\r\n    background-color: #ccc;\r\n    width: 10%;\r\n    display: flex;\r\n    flex-direction: column-reverse;\r\n    padding-bottom: 18px;\r\n    /* Higher notes at the top */\r\n    z-index: 12;\r\n}\r\n\r\n.octave {\r\n    flex-direction: column;\r\n    position: relative;\r\n}\r\n\r\n.keys-wrapper {\r\n    flex-direction: column-reverse;\r\n    /* Ensure keys are in the correct order */\r\n}\r\n\r\n.piano-key {\r\n    box-sizing: border-box;\r\n    border: 1px solid #ccc;\r\n    cursor: pointer;\r\n    position: relative;\r\n    user-select: none;\r\n}\r\n\r\n.white-key {\r\n    width: 100%;\r\n    height: 24px;\r\n    align-content: center;\r\n    /* Adjust based on desired key height */\r\n    background: white;\r\n    border-bottom: 1px solid #ccc;\r\n    text-align: right;\r\n    padding-right: 10px;\r\n    user-select: none;\r\n    font-size: 80%;\r\n}\r\n\r\n.black-key {\r\n    background: black;\r\n    color: #fff;\r\n    width: 100%;\r\n    height: 24px;\r\n    align-content: center;\r\n    /* Adjust based on desired key height */\r\n    position: relative;\r\n    /* Center black key over white key */\r\n    text-align: right;\r\n    padding-right: 10px;\r\n    user-select: none;\r\n    font-size: 80%;\r\n}\r\n\r\n.white-key:nth-child(2n+1) {\r\n    background: #fff;\r\n}\r\n\r\n.white-key:nth-child(12n) {\r\n    background: #bbb;\r\n}\r\n\r\n.grid-wrapper {\r\n    overflow-x: scroll;\r\n    overflow-y: hidden;\r\n    flex-grow: 1;\r\n    position: relative;\r\n}\r\n\r\n.ruler {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    margin-top: 40px;\r\n    margin-left: calc(10% - 2px);\r\n    background-color: #eee;\r\n    height: 29px;\r\n    border-bottom: 1px solid #ccc;\r\n    display: flex;\r\n    align-items: end;\r\n    font-size: 12px;\r\n    color: #333;\r\n    background: repeating-linear-gradient( /*This is the horizontal lines*/\r\n        90deg,\r\n        #bbb,\r\n        #bbb 2px,\r\n        #eee 2px,\r\n        #eee 256px\r\n    );\r\n    z-index: 11;\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.ruler-tick-label {\r\n    position: absolute;\r\n    bottom: 0;\r\n    white-space: nowrap;\r\n    transform: translateX(5px);\r\n    font-size: 14px;\r\n    color: #333;\r\n}\r\n\r\n.marker-replay-triangle {\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0;\r\n    border-left: 10px solid transparent;\r\n    border-right: 10px solid transparent;\r\n    border-top: 10px solid #bbb; /* Triangle color */\r\n    left: 50%;\r\n    bottom: 0; /* Inside the ruler */\r\n    transform: translateX(-50%);\r\n}\r\n\r\n.marker-wrapper {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    transform: translateX(-50%);\r\n    pointer-events: none;\r\n}\r\n\r\n.marker-triangle {\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0;\r\n    border-left: 10px solid transparent;\r\n    border-right: 10px solid transparent;\r\n    border-top: 10px solid #f00; /* Triangle color */\r\n    left: 50%;\r\n    bottom: 0; /* Inside the ruler */\r\n    transform: translateX(-50%);\r\n}\r\n\r\n.marker-line {\r\n    position: absolute;\r\n    width: 2px;\r\n    height: 100vh;\r\n    background-color: #f00;\r\n    left: 50%;\r\n    bottom: - 100%; /* Below the ruler */\r\n    transform: translateX(-50%);\r\n}\r\n\r\n.grid {\r\n    padding-top: 18px;\r\n    margin-top: 30px;\r\n    position: absolute;\r\n    display: flex;\r\n    min-width: 100%;\r\n    align-self: top;\r\n    height: 100%;/*2592px;*/\r\n    background: repeating-linear-gradient( /*This is the horizontal lines*/\r\n        0deg,\r\n        #bbb,\r\n        #bbb 2px,\r\n        transparent 2px,\r\n        transparent 24px\r\n    ),\r\n    repeating-linear-gradient( /*This is the Bar line*/\r\n        90deg,\r\n        #777,\r\n        #777 2px,\r\n        transparent 2px,\r\n        transparent 256px\r\n    ),\r\n    repeating-linear-gradient( /*This is the vertical lines*/\r\n        90deg,\r\n        #c0c0c0,\r\n        #c0c0c0 2px,\r\n        transparent 2px,\r\n        transparent 16px\r\n    ),\r\n    repeating-linear-gradient(/*This is the background colors*/\r\n        90deg,\r\n        #e0e0e0,\r\n        #e0e0e0 64px,\r\n        #ccc 64px,\r\n        #ccc 128px\r\n    );\r\n    z-index: 10;\r\n    overflow: hidden;\r\n}\r\n\r\n.note {\r\n  position: absolute;\r\n  background-color: rgba(0, 120, 255, 0.5);\r\n  border: 1px solid #0078d4;\r\n  cursor: pointer;\r\n  box-sizing: border-box;\r\n  user-select: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 20;\r\n  font-size: 70%;\r\n  margin-left: 1px;\r\n}\r\n\r\n.note:active {\r\n    background-color: rgba(0, 120, 255, 0.7);\r\n}\r\n\r\n.resize-handle {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    width: 40%; /* Adjust as needed */\r\n    max-width: 10px;\r\n    height: 100%;\r\n    cursor: ew-resize;\r\n    background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.play-button {\r\n  position: fixed;\r\n  top: 10px;\r\n  right: 10px;\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  border: none;\r\n  border-radius: 5px;\r\n  background-color: #0078d4;\r\n  color: white;\r\n  z-index: 1000; /* Ensure it's on top of other elements */\r\n  outline: none;\r\n  box-shadow: 0 3px 4px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.loop-wrapper {\r\n    position: fixed;\r\n    top: 10px;\r\n    right: 160px;\r\n    padding: 10px 20px;\r\n    height: 18px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    background-color: #0078d4;\r\n    color: white;\r\n    border-radius: 5px;\r\n    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.3);\r\n    z-index: 1000;\r\n}\r\n\r\n.controls {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.instrument-selector,\r\n.tempo-selector {\r\n    margin-right: 15px;\r\n}\r\n\r\n.selection-rect {\r\n    position: absolute;\r\n    border: 1px solid rgba(0, 100, 255, 0.5);\r\n    background-color: rgba(0, 100, 255, 0.3);\r\n    z-index: 30;\r\n}\r\n\r\n</style>","<template>\r\n    <div>\r\n      <!-- Help Button -->\r\n      <button \r\n        class=\"help-button\"\r\n        @click=\"showHelp\"\r\n      >\r\n        <span v-if=\"hoverHelp\">Help</span>\r\n        <span v-else> ? </span>\r\n      </button>\r\n  \r\n      <!-- Help Modal -->\r\n      <div v-if=\"isHelpVisible\" class=\"modal-background\">\r\n        <transition name=\"fade\">\r\n          <div class=\"help-modal\">\r\n            <button class=\"close-button\" @click=\"closeHelp\">X</button>\r\n            <div class=\"help-content\">\r\n              <h1>Help</h1>\r\n              <h3>Placing Notes</h3>\r\n              <li>To place notes, click anywhere on the grid.</li>\r\n              <li>The size of the note will be the same size as the note that was last placed/moved.</li>\r\n              <li>Placed notes are instantly draggable</li>\r\n\r\n              <h3>Dragging Notes</h3>\r\n              <li>To drag a note, click on the left side of the note. Then, move your mouse around within the bounds of the grid.</li>\r\n              <li>Holding <strong>Alt</strong> will move notes freely (not locked to the grid).</li>\r\n              <li>If multiple notes are selected, all selected notes will be moved together.</li>\r\n              \r\n              <h3>Resizing Notes</h3>\r\n              <li>To resize a note, click on the right side of the note, then drag left or right.</li>\r\n              <li>Notes have a minimum length of 1/64th of a beat.</li>\r\n              <li>Holding <strong>Alt</strong> will resize notes freely (not locked to the grid)</li>\r\n              <li>If multiple notes are selected, all selected notes will be resized together.</li>\r\n\r\n              <h3>Selecting Multiple Notes</h3>\r\n              <li>To select multiple notes at once, hold <strong>Ctrl</strong> on the grid and drag your mouse.</li>\r\n              <li>If you hold <strong>Ctrl+Shift</strong> and drag, you will \"add on\" to your note selection. <i>(Previously selected notes will not be unselected, and you can select additional notes.)</i></li>\r\n              <li>If you hold <strong>Shift</strong> and drag a note, you will clone it (if that note is highlighted, it will clone all highlighted notes).</li>\r\n              <li>Pressing <strong>Ctrl+A</strong> will select all notes in the grid.</li>\r\n              <li>Pressing the <strong>Backspace</strong> or <strong>Delete</strong> keys will delete all selected notes.</li>\r\n\r\n              <h3>Misc</h3>\r\n              <li>Click and hold on the piano keys to play them. <br><em>(Note: some instruments can only play certain keys)</em></li>\r\n              <li>Press <strong>Space</strong> to play your song. It will start from the marker.</li>\r\n              <li>Press <strong>Space</strong> again to pause your song. If you press <strong>Ctrl+Space</strong>, it will stop the marker where it was.</li>\r\n              <li>Check the <strong>Loop</strong> checkbox to loop your song.</li>\r\n              <li>Click and drag on the timeline to move the marker.</li>\r\n              <li>If you hold <strong>ALT</strong> while dragging, the marker will move freely.</li>\r\n              <li>You can change instruments using the spinner at the top left of the page.</li>\r\n              <li>You can change the tempo by entering a number at the top left of the page.</li>\r\n      \r\n              <h3>Planned Features</h3>\r\n              <li>Multiple Tracks</li>\r\n              <li>MabiMML import/export</li>\r\n              <li>MIDI import/export support</li>\r\n              <li>Support for saving/loading \"projects\"</li>\r\n\r\n              <p class=\"credits\">Credits: Made by Daderic</p>\r\n\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        hoverHelp: false,\r\n        isHelpVisible: true, // Initially visible when the page loads\r\n      };\r\n    },\r\n    methods: {\r\n      showHelp() {\r\n        this.isHelpVisible = true;\r\n      },\r\n      closeHelp() {\r\n        this.isHelpVisible = false;\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .help-button {\r\n    position: fixed;\r\n    top: 14px;\r\n    right: 280px;\r\n    width: 34px;\r\n    height: 34px;\r\n    cursor: pointer;\r\n    border-radius: 50%;\r\n    background-color: white;\r\n    border-width: 2px;\r\n    border-style: solid;\r\n    font-size: 24px;\r\n    border-color: black;\r\n    font-weight: lighter;\r\n    color: black;\r\n    z-index: 1000;\r\n    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.3);\r\n  }\r\n  \r\n  .help-button span {\r\n    display: block;\r\n  }\r\n  \r\n  .modal-background {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 1000;\r\n  }\r\n  \r\n  .help-modal {\r\n    background-color: white;\r\n    padding: 20px;\r\n    width: 500px;\r\n    max-height: 80%;\r\n    overflow-y: auto;\r\n    border-radius: 8px;\r\n    position: relative;\r\n    justify-items: left;\r\n    justify-content: left;\r\n  }\r\n  \r\n  .close-button {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 10px;\r\n    background-color: transparent;\r\n    border: none;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  .fade-enter-active, .fade-leave-active {\r\n    transition: opacity 0.5s;\r\n  }\r\n  .fade-enter, .fade-leave-to /* .fade-leave-active in <2.1.8 */ {\r\n    opacity: 0;\r\n  }\r\n  \r\n  .help-content {\r\n    font-size: 14px;\r\n    line-height: 1.6;\r\n    text-align: left;\r\n  }\r\n\r\n  .help-content h1 {\r\n    text-align: center;\r\n  }\r\n  \r\n  .credits {\r\n    margin-top: 20px;\r\n    font-style: italic;\r\n  }\r\n  </style>\r\n  ","import { render } from \"./HelpMenu.vue?vue&type=template&id=73f10a7a&scoped=true\"\nimport script from \"./HelpMenu.vue?vue&type=script&lang=js\"\nexport * from \"./HelpMenu.vue?vue&type=script&lang=js\"\n\nimport \"./HelpMenu.vue?vue&type=style&index=0&id=73f10a7a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-73f10a7a\"]])\n\nexport default __exports__","import { render } from \"./PianoRoll.vue?vue&type=template&id=3890887a&scoped=true\"\nimport script from \"./PianoRoll.vue?vue&type=script&lang=js\"\nexport * from \"./PianoRoll.vue?vue&type=script&lang=js\"\n\nimport \"./PianoRoll.vue?vue&type=style&index=0&id=3890887a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3890887a\"]])\n\nexport default __exports__","import { render } from \"./Sequencer.vue?vue&type=template&id=2e49d91b&scoped=true\"\nimport script from \"./Sequencer.vue?vue&type=script&lang=js\"\nexport * from \"./Sequencer.vue?vue&type=script&lang=js\"\n\nimport \"./Sequencer.vue?vue&type=style&index=0&id=2e49d91b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2e49d91b\"]])\n\nexport default __exports__","import { render } from \"./PatternEditor.vue?vue&type=template&id=233a7f0a&scoped=true\"\nimport script from \"./PatternEditor.vue?vue&type=script&lang=js\"\nexport * from \"./PatternEditor.vue?vue&type=script&lang=js\"\n\nimport \"./PatternEditor.vue?vue&type=style&index=0&id=233a7f0a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-233a7f0a\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=45718dbe\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=45718dbe&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport HelpMenu from './components/HelpMenu.vue'\n\ncreateApp(App).mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/MabiMML/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmusic_sequencer\"] = self[\"webpackChunkmusic_sequencer\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(99062); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createElementVNode","alt","src","_imports_0","id","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_createVNode","_component_PatternEditor","class","ref","_component_PianoRoll","for","_hoisted_13","_hoisted_14","onClick","_cache","args","$setup","playSequence","_createTextVNode","type","$event","loopSong","_component_HelpMenu","_hoisted_3","_hoisted_4","_hoisted_5","selectedInstrument","onChange","changeInstrument","_renderList","instruments","instrument","index","key","value","name","_hoisted_6","_hoisted_7","_hoisted_8","tempo","min","max","number","_hoisted_9","_hoisted_10","octaves","octave","_hoisted_11","notes","slice","reverse","note","_normalizeClass","isBlack","onMousedown","startNote","onMouseover","mouseOverNote","onMouseup","endNote","onMouseleave","mouseLeaveNote","style","_normalizeStyle","zIndex","_hoisted_12","startMarkerDrag","width","gridSpan","Math","ceil","left","markerReplayPosition","markerPosition","_hoisted_15","_hoisted_16","_withModifiers","handleGridClick","onContextmenu","_ctx","startNoteRemove","notesInGrid","top","gridHeight","highlighted","startDrag","removeNote","endDrag","startResize","_hoisted_18","_toDisplayString","_hoisted_17","isSelecting","rectangleStyle","_createCommentVNode","$options","showHelp","$data","hoverHelp","isHelpVisible","_Transition","default","_withCtx","closeHelp","_","data","methods","this","__exports__","components","HelpMenu","setup","root","pianoRoll","grid","synth","context","isMouseDown","sf2","midiBuilder","currentNoteLength","gridWidth","draggingNotes","resizingNotes","startX","startY","window","innerWidth","scrollX","selectedNotes","currentX","currentY","ruler","seq","isPlaying","computed","abs","height","backgroundColor","border","noteNames","blackNotes","map","includes","watchEffect","maxRightPosition","loadSoundFont","async","response","fetch","soundFontArrayBuffer","arrayBuffer","error","console","onMounted","gridWrapper","document","querySelector","addEventListener","updateRuler","handleKeyPress","AudioContext","audioWorklet","addModule","Synthetizer","destination","undefined","chorusEnabled","reverbEnabled","isReady","event","updateMarkerPos","clientX","altKey","onMarkerDrag","onMarkerDragEnd","removeEventListener","markerInterval","startMarkerAnim","doMarkerAnim","tick","clearInterval","setInterval","stopMarkerAnim","fromClick","rulerRect","getBoundingClientRect","newPos","round","code","preventDefault","stop","ctrlKey","selectNote","scrollLeft","MIDIBuilder","resume","notesAdded","forEach","channel","pitch","indexOf","parseInt","noteStartTime","noteDuration","markerTime","startTime","duration","addNoteOn","addNoteOff","flush","b","writeMIDIFile","Sequencer","binary","loop","skipToFirstNoteOn","addOnSongEndedEvent","play","noteOn","noteOff","length","soundfontManager","reloadManager","startPositions","Map","placeNote","button","clearSelection","push","shiftKey","Date","now","draggingNote","set","x","y","clientY","onDrag","outOfBounds","newPositions","startPos","get","dx","dy","newLeft","newTop","noteName","floor","clear","startResizeData","n","onResize","endResize","allInBounds","newWidths","startData","newWidth","startSelection","startPlacingNote","rect","onSelectionMove","onSelectionEnd","checkIntersections","selectionRect","right","bottom","itemRect","intersects","rect1","rect2","gridElement","scrollTop","existingNote","find","filter","PianoRoll","scrollContainer","PatternEditor","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","p","baseURI","self","location","href","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}