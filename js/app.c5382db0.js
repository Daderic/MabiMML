(function(){"use strict";var e={9182:function(e,t,l){var n=l(45130),o=l(56768);const a={id:"app"};function r(e,t,l,n,r,i){const s=(0,o.g2)("PatternEditor");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(s)])}const i={class:"pattern-editor"},s={class:"scroll-container",ref:"scrollContainer"};function u(e,t,l,n,a,r){const u=(0,o.g2)("PianoRoll");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",s,[(0,o.bF)(u)],512)])}var c=l(90144),h=l(24232);const d=e=>((0,o.Qi)("data-v-1f39f2f4"),e=e(),(0,o.jt)(),e),m={class:"piano-container"},p={class:"loop-wrapper"},v={class:"scroll-wrapper"},f={key:0,class:"copyNotification"},k={key:1,class:"copyNotification",style:{"background-color":"#d44"}},g={class:"controls"},y={class:"instrument-selector"},b=d((()=>(0,o.Lk)("label",{for:"instrument-select"},"Select Instrument: ",-1))),L=["value"],w={class:"tempo-selector"},T=d((()=>(0,o.Lk)("label",{for:"tempo-select"},"Tempo: ",-1))),M=d((()=>(0,o.Lk)("input",{type:"file",id:"hiddenFileInput",style:{display:"none"},accept:".mid,.midi"},null,-1))),x={class:"grid-division-selector"},E=d((()=>(0,o.Lk)("label",{for:"grid-select",style:{"padding-left":"10px"}},"Grid Spacing: ",-1))),C=["value"],R={style:{padding:"10px"}},S={class:"piano-roll",ref:"pianoRoll"},N={class:"piano-keys"},W={class:"keys-wrapper"},K=["onMousedown","onMouseover","onMouseup","onMouseleave"],I=d((()=>(0,o.Lk)("div",{class:"marker-triangle"},null,-1))),O=d((()=>(0,o.Lk)("div",{class:"marker-line"},null,-1))),D=[I,O],X={class:"grid-wrapper"},P=["width"];function F(e,t,l,a,r,i){const s=(0,o.g2)("ExportMenu"),u=(0,o.g2)("HelpMenu"),c=(0,o.g2)("Tracks"),d=(0,o.g2)("TempoMarker");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("button",{class:"play-button",onClick:t[0]||(t[0]=(...e)=>a.playSequence&&a.playSequence(...e))},"Play Sequence"),(0,o.Lk)("label",p,[(0,o.eW)(" Loop: "),(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>a.loopSong=e)},null,512),[[n.lH,a.loopSong]])]),(0,o.Lk)("label",v,[(0,o.eW)(" Auto-scroll: "),(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>a.autoScrollSong=e)},null,512),[[n.lH,a.autoScrollSong]])]),(0,o.bF)(s,{tracks:a.tracks,generateTokens:a.genTokensOutright,renderTokens:a.renderTokens,copyToClipboard:a.copyToClipboard},null,8,["tracks","generateTokens","renderTokens","copyToClipboard"]),(0,o.bF)(u),a.showSuccessNotification?((0,o.uX)(),(0,o.CE)("div",f,(0,h.v_)(a.successNotificationText),1)):(0,o.Q3)("",!0),a.showFailedNotification?((0,o.uX)(),(0,o.CE)("div",k,(0,h.v_)(a.failedNotificationText),1)):(0,o.Q3)("",!0),(0,o.bF)(c,{onTrackSelected:a.handleTrackSelected,onAddTrack:a.handleAddTrack,onRemoveTrack:a.handleRemoveTrack,onMuteTrack:a.handleMuteTrack,onColorChange:a.updateColor},null,8,["onTrackSelected","onAddTrack","onRemoveTrack","onMuteTrack","onColorChange"]),(0,o.Lk)("div",g,[(0,o.Lk)("div",y,[b,(0,o.bo)((0,o.Lk)("select",{id:"instrument-select","onUpdate:modelValue":t[3]||(t[3]=e=>a.selectedInstrument=e),onChange:t[4]||(t[4]=e=>a.changeInstrument(!1))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.instruments,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:e},(0,h.v_)(e.name),9,L)))),128))],544),[[n.u1,a.selectedInstrument]])]),(0,o.Lk)("div",w,[T,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"tempo-select","onUpdate:modelValue":t[5]||(t[5]=e=>a.tempo=e),min:"40",max:"240"},null,512),[[n.Jo,a.tempo,void 0,{number:!0}]])]),(0,o.Lk)("button",{class:"track-splitter",onClick:t[6]||(t[6]=(...e)=>a.trackify&&a.trackify(...e))},"Split Track"),(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>a.parseMMLFromClipboard&&a.parseMMLFromClipboard(...e)),style:{"margin-left":"10px"}},"Import MML From Clipboard"),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>a.importMidi&&a.importMidi(...e)),style:{"margin-left":"10px"}},"Import MIDI"),M,(0,o.Lk)("div",x,[E,(0,o.bo)((0,o.Lk)("select",{id:"grid-select","onUpdate:modelValue":t[9]||(t[9]=e=>a.gridWidth=e)},[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)([{displayName:"16ths",width:16},{displayName:"12ths",width:256/12}],(e=>(0,o.Lk)("option",{key:e.displayName,value:e.width},(0,h.v_)(e.displayName),9,C))),64))],512),[[n.u1,a.gridWidth]])]),(0,o.Lk)("label",R,(0,h.v_)("Current Note Volume: "+a.currentNoteVolume),1)]),(0,o.Lk)("div",S,[(0,o.Lk)("div",N,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.octaves,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"octave"},[(0,o.Lk)("div",W,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.notes.slice().reverse(),((t,l)=>((0,o.uX)(),(0,o.CE)("div",{key:t.name,class:(0,h.C4)(["piano-key",t.isBlack?"black-key":"white-key"]),onMousedown:l=>a.startNote(0,t,e),onMouseover:l=>a.mouseOverNote(0,t,e),onMouseup:l=>a.endNote(0,t,e),onMouseleave:l=>a.mouseLeaveNote(0,t,e),style:(0,h.Tr)({zIndex:t.isBlack?1:0,background:t.index+12*e<a.instrKeyMin||t.index+12*e>a.instrKeyMax?"#d44":t.isBlack?"#000":"#fff"})},(0,h.v_)(t.name+e),47,K)))),128))])])))),128))]),(0,o.Lk)("div",{class:"ruler",ref:"ruler",onMousedown:t[11]||(t[11]=(...e)=>a.handleRulerClick&&a.handleRulerClick(...e)),style:(0,h.Tr)({width:"calc( 10% + "+a.gridSpan*a.zoomScalar+"px )",background:`repeating-linear-gradient(\n                        90deg,\n                        #bbb,\n                        #bbb 2px,\n                        #eee 2px,\n                        #eee ${256*a.zoomScalar}px\n                    )`,float:"bottom"})},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Math.ceil(a.gridSpan/256),(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"ruler-tick-label",style:(0,h.Tr)({left:`calc(${256*(e-1)*a.zoomScalar}px)`})},(0,h.v_)(e),5)))),128)),(0,o.Lk)("div",{class:"marker-replay-triangle",style:(0,h.Tr)({left:a.markerReplayPosition*a.zoomScalar+"px"})},null,4),(0,o.Lk)("div",{class:"marker-wrapper",style:(0,h.Tr)({left:a.markerPosition*a.zoomScalar+"px"})},D,4),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.tempoMarkers,((e,l)=>((0,o.uX)(),(0,o.Wv)(d,{key:e.left,left:e.left*a.zoomScalar+1,tempo:e.tempo,index:l,color:e.color,visible:e.muted?"hidden":"visible",onClick:[a.clickTempoMarker,t[10]||(t[10]=(0,n.D$)((()=>{}),["stop"]))]},null,8,["left","tempo","index","color","visible","onClick"])))),128))],36),(0,o.Lk)("div",X,[(0,o.Lk)("div",{class:"grid",ref:"grid",style:(0,h.Tr)({width:a.gridSpan*a.zoomScalar+"px",height:"2622px"})},[(0,o.Lk)("div",{style:(0,h.Tr)({width:a.scrollX+"px"})},null,4),(0,o.Lk)("canvas",{class:"gridCanvas",ref:"gridCanvas",width:.9*a.windowWidth-14,height:2592,onMousemove:t[12]||(t[12]=(...e)=>a.tryRemoveNote&&a.tryRemoveNote(...e)),onMousedown:t[13]||(t[13]=(...e)=>a.handleGridClick&&a.handleGridClick(...e)),onContextmenu:t[14]||(t[14]=(0,n.D$)(((...t)=>e.startNoteRemove&&e.startNoteRemove(...t)),["prevent"])),onWheel:t[15]||(t[15]=(...e)=>a.handleGridScroll&&a.handleGridScroll(...e))},null,40,P),a.isSelecting?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"selection-rect",style:(0,h.Tr)(a.rectangleStyle)},null,4)):(0,o.Q3)("",!0)],4)])],512)])}l(44114),l(17642),l(58004),l(33853),l(45876),l(32475),l(15024),l(31698);var A=l(20715);const H=e=>((0,o.Qi)("data-v-15b86ff3"),e=e(),(0,o.jt)(),e),V={key:0},$={key:1},B={class:"help-modal"},_=H((()=>(0,o.Lk)("h1",null,"Help",-1))),z=H((()=>(0,o.Lk)("p",{class:"credits"},"MOS v1.2",-1))),G=H((()=>(0,o.Lk)("h3",null,"Navigating the Grid",-1))),j=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"Scroll within the grid using the scroll bars, or directly with your mouse wheel."),(0,o.Lk)("li",null,"Scrolling your mouse wheel normally will move the grid vertically."),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Shift"),(0,o.eW)(" while scrolling will move the grid horizontally.")]),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Ctrl"),(0,o.eW)(" and scrolling will zoom the grid in and out.")]),(0,o.Lk)("li",null,"If the grid is focused (after clicking inside it), you can use the arrow keys to navigate around the grid.")],-1))),U=H((()=>(0,o.Lk)("h3",null,"Placing Notes",-1))),Y=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"To place notes, click anywhere on the grid."),(0,o.Lk)("li",null,"The size of the note will be the same size as the note that was last placed/moved."),(0,o.Lk)("li",null,"Placed notes are instantly draggable."),(0,o.Lk)("li",null,"The color of the placed notes will depend on the color of the track they belong to."),(0,o.Lk)("li",null,'By changing the "Grid Spacing" dropdown, you can control whether the grid is in 16ths or 12ths.'),(0,o.Lk)("li",null,"Each instrument has a different range of notes that it can play. The red keys on the piano to the left indicate notes that will not make a sound with the current instrument.")],-1))),q=H((()=>(0,o.Lk)("h3",null,"Dragging Notes",-1))),J=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"To drag a note, click on the left side of the note. Then, move your mouse around within the bounds of the grid."),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Alt"),(0,o.eW)(" will move notes freely (not locked to the grid).")]),(0,o.Lk)("li",null,"If multiple notes are selected, all selected notes will be moved together (even if they are from different tracks).")],-1))),Q=H((()=>(0,o.Lk)("h3",null,"Resizing Notes",-1))),Z=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"To resize a note, click on the right side of the note, then drag left or right."),(0,o.Lk)("li",null,"Notes have a minimum length of 1/64th of a beat."),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Alt"),(0,o.eW)(" will resize notes freely (not locked to the grid)")]),(0,o.Lk)("li",null,"If multiple notes are selected, all selected notes will be resized together.")],-1))),ee=H((()=>(0,o.Lk)("h3",null,"Note Volume",-1))),te=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"The current note volume can be seen at the top of the screen."),(0,o.Lk)("li",null,"A note's volume is indicated by the opacity of the note, as well as the number next to the note's name."),(0,o.Lk)("li",null,"To change a note's volume, left click and hold on the half-circle at the bottom center of the note. Then, drag your mouse up and down. Dragging up will increase the note's volume, and dragging down will decrease it."),(0,o.Lk)("li",null,"Notes start with a default volume of 8."),(0,o.Lk)("li",null,"Notes have a volume range from 1 to 15."),(0,o.Lk)("li",null,"Changing a note's volume while multiple notes are selected will change the volume of all selected notes by the same amount.")],-1))),le=H((()=>(0,o.Lk)("h3",null,"Selecting Multiple Notes",-1))),ne=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.eW)("To select multiple notes at once, hold "),(0,o.Lk)("strong",null,"Ctrl"),(0,o.eW)(" on the grid and drag your mouse.")]),(0,o.Lk)("li",null,[(0,o.eW)("If you hold "),(0,o.Lk)("strong",null,"Ctrl+Shift"),(0,o.eW)(' and drag, you will "add on" to your note selection. '),(0,o.Lk)("i",null,"(Previously selected notes will not be unselected, and you can select additional notes.)")]),(0,o.Lk)("li",null,[(0,o.eW)("If you hold "),(0,o.Lk)("strong",null,"Shift"),(0,o.eW)(" and drag a note, you will clone it (if that note is highlighted, it will clone all highlighted notes).")]),(0,o.Lk)("li",null,[(0,o.eW)("Pressing "),(0,o.Lk)("strong",null,"Ctrl+A"),(0,o.eW)(" will select all notes in the grid.")]),(0,o.Lk)("li",null,[(0,o.eW)("Pressing the "),(0,o.Lk)("strong",null,"Backspace"),(0,o.eW)(" or "),(0,o.Lk)("strong",null,"Delete"),(0,o.eW)(" keys will delete all selected notes.")]),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Ctrl"),(0,o.eW)(" and pressing the left or right arrows will move the selected notes a whole grid space (i.e. 1/16th or 1/12th).")]),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Ctrl"),(0,o.eW)(" and pressing the up or down arrows will move the selected notes an octave (if possible).")]),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Shift"),(0,o.eW)(" and pressing the left or right arrows will move the selected notes a fourth of a grid space (i.e. 1/64th or 1/48th).")]),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Shift"),(0,o.eW)(" and pressing the up or down arrows will move the selected notes up or down a single note (if possible).")]),(0,o.Lk)("li",null,[(0,o.eW)("Pressing "),(0,o.Lk)("strong",null,"T"),(0,o.eW)(" with notes selected will move them into the currently selected track.")])],-1))),oe=H((()=>(0,o.Lk)("h3",null,"Tracks",-1))),ae=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"Each track has its own name, instrument, color, and visibility/mute toggle."),(0,o.Lk)("li",null,"To add a track, click on the blue plus button to the right of the tracks."),(0,o.Lk)("li",null,[(0,o.eW)("To rename a track, double click on the track's name. When done with renaming, press "),(0,o.Lk)("strong",null,"Enter"),(0,o.eW)(". ")]),(0,o.Lk)("li",null,"To mute/unmute a track, click on the volume icon next to the track's name."),(0,o.Lk)("li",null,"To focus on a track, right click on the volume icon. This will mute all other tracks."),(0,o.Lk)("li",null,"To unfocus, right click on the volume icon again. This will unmute all other tracks."),(0,o.Lk)("li",null,"Clicking on a note from another track will cause you to switch to that note's track."),(0,o.Lk)("li",null,[(0,o.eW)("You can remove a track by clicking on the "),(0,o.Lk)("strong",null,"X"),(0,o.eW)(". This will also remove the notes belonging to that track.")]),(0,o.Lk)("li",null,"To change the color of a track and its notes, click on the outlined box at the bottom-center of the selected track's tab."),(0,o.Lk)("li",null,"You can have a minimum of 1 track, and a maximum of 16 tracks."),(0,o.Lk)("li",null,"The number of tracks you can have at once is dependant on screen width. This is so that smaller screens can still access all of their created tabs easily."),(0,o.Lk)("li",null,"Hovering over a track tab will show you the name of the track."),(0,o.Lk)("li",null,[(0,o.eW)("With notes selected, pressing "),(0,o.Lk)("strong",null,"Ctrl+C"),(0,o.eW)(" or "),(0,o.Lk)("strong",null,"Ctrl+X"),(0,o.eW)(" will copy/cut notes. ")]),(0,o.Lk)("li",null,[(0,o.eW)("After copying/cutting notes, you can paste them back in with "),(0,o.Lk)("strong",null,"Ctrl+V"),(0,o.eW)(". This will paste all previously copied notes into the current track.")])],-1))),re=H((()=>(0,o.Lk)("h3",null,"Track Splitting",-1))),ie=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,'With a track selected, click the "Split Track" button. This will separate the track into multiple other tracks (unless that number would exceed 16).'),(0,o.Lk)("li",null,"A track is split from left to right, then top to bottom. This can sometimes lead to weird splits."),(0,o.Lk)("li",null,"The purpose of this feature is so that you can compose parts of your piece in a single track, then split them up if you need to.")],-1))),se=H((()=>(0,o.Lk)("h3",null,"Exporting to MML",-1))),ue=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,'Clicking on the "Export" button will open a menu allowing the export of MML to your clipboard (it may take a moment to open).'),(0,o.Lk)("li",null,"A maximum of four tracks can be exported at once, or three tracks if the 'Exclude Song Part' box is checked."),(0,o.Lk)("li",null,"Remember that the fourth track in a score is always the 'song' track."),(0,o.Lk)("li",null,"Tracks that have multiple notes playing at once will NOT be exportable (marked with an asterisk), so be sure to split them before export."),(0,o.Lk)("li",null,"The exported MML will be moderately optimized for length; they will not be perfectly optimized."),(0,o.Lk)("li",null,"Exported tracks are sorted by length by default, but this can be changed by unchecking the box."),(0,o.Lk)("li",null,"When tracks are not sorted by length, they are sorted by the order in which they were selected."),(0,o.Lk)("li",null,[(0,o.eW)("In the future, tracks will be able to be split into separate Jabchiel-compatible scores based on the rank you select. "),(0,o.Lk)("strong",null,"*Jabchiel export is currently non-functional*"),(0,o.eW)(", but you can play with it to see what is intended. ")])],-1))),ce=H((()=>(0,o.Lk)("h3",null,"Importing MML",-1))),he=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,'Clicking on the "Import MML From Clipboard" button will attempt to copy whatever is in your clipboard into new sequencer tracks.'),(0,o.Lk)("li",null,"Available import types are MMLs that start with `MML@` and end with a semicolon (;), or MMLs taken straight from Mabinogi score scrolls."),(0,o.Lk)("li",null,"Imported MMLs should not have any extraneous spaces, characters, or new line characters. Otherwise, they will not import properly."),(0,o.Lk)("li",null,"Importing from Mabinogi directly will named the tracks according to which track they came from (e.g. Melody, Harmony 1, Harmony 2, Song)")],-1))),de=H((()=>(0,o.Lk)("h3",null,"Importing MIDI",-1))),me=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,'Clicking on the "Import MIDI" button will open your computer\'s file browser.'),(0,o.Lk)("li",null,"From there, you can select a standard MIDI file and it will be imported. Most MIDI files should work. "),(0,o.Lk)("li",null,"Each MIDI track will be given its own track, regardless of polyphony."),(0,o.Lk)("li",null,"Imported songs will automatically be quantized to the nearest 64th note boundary.")],-1))),pe=H((()=>(0,o.Lk)("h3",null,"Tempo",-1))),ve=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"You can change the tempo by entering a number at the top left of the page. Note that this will only change the starting tempo of the song."),(0,o.Lk)("li",null,[(0,o.eW)("If you hold "),(0,o.Lk)("strong",null,"Shift"),(0,o.eW)(" and left click on the ruler on top of the grid, you will be prompted to enter a tempo (BPM).")]),(0,o.Lk)("li",null,"Tempo markers will automatically be assigned to the currently selected track. This is visible through the color of the marker. Deleting the selected track will delete all associated tempo markers."),(0,o.Lk)("li",null,[(0,o.eW)("Holding "),(0,o.Lk)("strong",null,"Alt"),(0,o.eW)(" while placing a marker will allow for more freedom in placement.")]),(0,o.Lk)("li",null,"Clicking on an existing tempo marker will allow you to modify it. By entering an empty string, you will delete the marker."),(0,o.Lk)("li",null,"Muting a track will also hide the tempo markers associated with that track."),(0,o.Lk)("li",null,"Right-clicking a tempo marker will move the tempo marker to the currently selected track.")],-1))),fe=H((()=>(0,o.Lk)("h3",null,"Misc",-1))),ke=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.eW)("Click and hold on the piano keys to play them. "),(0,o.Lk)("br"),(0,o.Lk)("em",null,"(Note: some instruments can only play certain keys)")]),(0,o.Lk)("li",null,[(0,o.eW)("Press "),(0,o.Lk)("strong",null,"Space"),(0,o.eW)(" to play your song. It will start from the marker.")]),(0,o.Lk)("li",null,[(0,o.eW)("Press "),(0,o.Lk)("strong",null,"Space"),(0,o.eW)(" again to pause your song. If you press "),(0,o.Lk)("strong",null,"Ctrl+Space"),(0,o.eW)(", it will stop the marker where it was.")]),(0,o.Lk)("li",null,[(0,o.eW)("Check the "),(0,o.Lk)("strong",null,"Loop"),(0,o.eW)(" checkbox to loop your song.")]),(0,o.Lk)("li",null,"Click and drag on the timeline to move the marker."),(0,o.Lk)("li",null,[(0,o.eW)("If you hold "),(0,o.Lk)("strong",null,"ALT"),(0,o.eW)(" while dragging, the marker will move freely.")]),(0,o.Lk)("li",null,"You can change instruments using the spinner at the top left of the page.")],-1))),ge=H((()=>(0,o.Lk)("h3",null,"Planned Features",-1))),ye=H((()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"Jabchiel MML export."),(0,o.Lk)("li",null,"MIDI export support."),(0,o.Lk)("li",null,'Support for saving/loading "projects".'),(0,o.Lk)("li",null,"Undo/Redo functionality."),(0,o.Lk)("li",null,"Better exported MML optimization."),(0,o.Lk)("li",null,"Improved note rendering speed."),(0,o.Lk)("li",null,"Other algorithm options for track splitting.")],-1))),be=H((()=>(0,o.Lk)("p",{class:"credits"},"Credits: Made by Daderic",-1))),Le=[_,z,G,j,U,Y,q,J,Q,Z,ee,te,le,ne,oe,ae,re,ie,se,ue,ce,he,de,me,pe,ve,fe,ke,ge,ye,be];function we(e,t,l,a,r,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("button",{class:"help-button",onClick:t[0]||(t[0]=(...e)=>i.showHelp&&i.showHelp(...e))},[r.hoverHelp?((0,o.uX)(),(0,o.CE)("span",V,"Help")):((0,o.uX)(),(0,o.CE)("span",$," ? "))]),r.isHelpVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-background",onClick:t[3]||(t[3]=(...e)=>i.closeHelp&&i.closeHelp(...e))},[(0,o.bF)(n.eB,{name:"fade"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",B,[(0,o.Lk)("button",{class:"close-button",onClick:t[1]||(t[1]=(...e)=>i.closeHelp&&i.closeHelp(...e))},"X"),(0,o.Lk)("div",{class:"help-content",onClick:t[2]||(t[2]=(0,n.D$)((()=>{}),["stop"]))},Le)])])),_:1})])):(0,o.Q3)("",!0)])}var Te={data(){return{hoverHelp:!1,isHelpVisible:!0}},methods:{showHelp(){this.isHelpVisible=!0},closeHelp(){this.isHelpVisible=!1}}},Me=l(71241);const xe=(0,Me.A)(Te,[["render",we],["__scopeId","data-v-15b86ff3"]]);var Ee=xe;const Ce={class:"track-tab-container",ref:"tabContainerRef"},Re=["onMousedown","title"],Se={class:"tab-header"},Ne=["onUpdate:modelValue","onBlur","onKeyup"],We=["onDblclick"],Ke=["onMousedown"],Ie=["onClick"],Oe={key:0,class:"color-picker-container"},De=["disabled"];function Xe(e,t,l,a,r,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.tracks,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,h.C4)(["track-tab",{selected:a.selectedTrackIndex===l}]),onMousedown:e=>a.selectTrack(l),style:(0,h.Tr)({backgroundColor:e.color}),title:e.name},[(0,o.Lk)("div",Se,[e.isEditingName?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,"onUpdate:modelValue":t=>e.name=t,onBlur:t=>e.isEditingName=!1,onKeyup:(0,n.jR)((t=>e.isEditingName=!1),["enter"]),class:"track-name-input"},null,40,Ne)),[[n.Jo,e.name]]):((0,o.uX)(),(0,o.CE)("span",{key:1,onDblclick:t=>e.isEditingName=!0,class:"track-name"},(0,h.v_)(e.name),41,We)),(0,o.Lk)("span",{class:"mute-icon",onMousedown:e=>a.toggleMute(e,l),onContextmenu:t[0]||(t[0]=e=>e.preventDefault())},(0,h.v_)(e.isMuted?"🔇":"🔊"),41,Ke),(0,o.Lk)("button",{onClick:(0,n.D$)((e=>a.removeTrack(l)),["stop"]),class:"delete-btn"},"✖",8,Ie)]),a.selectedTrackIndex===l?((0,o.uX)(),(0,o.CE)("div",Oe,[(0,o.bo)((0,o.Lk)("input",{type:"color","onUpdate:modelValue":t[1]||(t[1]=e=>a.trackHexColor=e),class:"color-picker",onInput:t[2]||(t[2]=(...e)=>a.updateTrackColor&&a.updateTrackColor(...e))},null,544),[[n.Jo,a.trackHexColor]])])):(0,o.Q3)("",!0)],46,Re)))),128)),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.addTrack&&a.addTrack(...e)),class:"add-track-btn",disabled:!a.canAddTrack}," + ",8,De)],512)])}const Pe=(0,c.Kh)({}),Fe=(0,c.KR)([]),Ae=(0,c.KR)(null),He=(0,o.EW)((()=>Fe.value[Ae.value]||null)),Ve=(0,c.KR)("#ffffff");var $e={created(){Pe.addTrack=this.addTrack},setup(e,{emit:t}){const l=(0,c.KR)(0),n=(0,c.KR)(null);let a=null;const r=(0,o.EW)((()=>{if(Fe.value.length>15)return!1;const e=75,t=Fe.value.length*e;return l.value-t-50>e})),i=()=>{n.value&&(l.value=n.value.clientWidth)},s=()=>{const e=Math.floor(360*Math.random()),t=75+25*Math.random(),l=50+10*Math.random(),n=(1-Math.abs(2*l/100-1))*(t/100),o=n*(1-Math.abs(e/60%2-1)),a=l/100-n/2;let[r,i,s]=e<60?[n,o,0]:e<120?[o,n,0]:e<180?[0,n,o]:e<240?[0,o,n]:e<300?[o,0,n]:[n,0,o];return r=Math.round(255*(r+a)),i=Math.round(255*(i+a)),s=Math.round(255*(s+a)),`#${((1<<24)+(r<<16)+(i<<8)+s).toString(16).slice(1)}`},u=(e=null,l=null,n=null,o=null)=>{const a={id:Fe.value.length+Date.now(),name:o||`Track ${Fe.value.length+1}`,isMuted:!1,color:n||s(),isEditingName:!1,notes:[],instrument:l||{name:"Lute",program:0,min:16,max:88}};return Fe.value.push(a),d(Fe.value.length-1),t("add-track",a,Fe.value.length-1),a},h=e=>{if(1===Fe.value.length)return;let l=!0;if(0!==Fe.value[e].notes.length&&(l=confirm(`Are you sure you want to delete the track "${Fe.value[e].name}"? All notes belonging to this track will also be deleted.`)),!l)return;let n=Fe.value[e];if(Fe.value.splice(e,1),0===Fe.value.length)Ae.value=null,Ve.value="#ffffff";else{if(e===Ae.value){const t=e<Fe.value.length?e:e-1;Ae.value=t,Ve.value=Fe.value[t].color}else Ae.value>e&&Ae.value--;He.value&&(Ve.value=He.value.color)}t("remove-track",n,He.value)},d=e=>{Ae.value=e,Ve.value=Fe.value[e].color,t("track-selected",Fe.value[e])},m=(e,l)=>{if(e.preventDefault(),0===e.button){if(Fe.value[l].isMuted=!Fe.value[l].isMuted,Fe.value[l].isMuted)for(const e of Fe.value[l].notes)e.muted=!0;else for(const e of Fe.value[l].notes)e.muted=!1;t("mute-track",l)}else if(2===e.button){a=Fe.value[l]===a?null:Fe.value[l];const e=null!==a;Fe.value[l].isMuted=!1;for(const t of Fe.value[l].notes)t.muted=!1;for(const[n,o]of Fe.value.entries())if(o!==Fe.value[l]){o.isMuted=e;for(const t of o.notes)t.muted=e;t("mute-track",n)}t("mute-track",l)}},p=e=>{const l=e.target.value;if(He.value){He.value.color=l,Ve.value=l;for(const e of He.value.notes)e.color=l}t("color-change",He.value,l)};return(0,o.sV)((()=>{u(),(0,o.dY)((()=>{i()})),window.addEventListener("resize",i)})),(0,o.xo)((()=>{window.removeEventListener("resize",i)})),{tracks:Fe,selectedTrackIndex:Ae,trackHexColor:Ve,containerWidth:l,addTrack:u,removeTrack:h,selectTrack:d,toggleMute:m,updateTrackColor:p,selectedTrack:He,canAddTrack:r,tabContainerRef:n}}};const Be=(0,Me.A)($e,[["render",Xe],["__scopeId","data-v-9809a5ba"]]);var _e=Be;l(44847);function ze(e,t,l,a,r,i){return(0,o.uX)(),(0,o.CE)("div",{class:"tempo-marker",style:(0,h.Tr)({left:l.left+"px",visibility:l.visible}),onMousedown:t[0]||(t[0]=(...e)=>a.clickMarker&&a.clickMarker(...e)),onContextmenu:t[1]||(t[1]=(0,n.D$)((e=>e.preventDefault()),["prevent"]))},[(0,o.Lk)("div",{class:"tempo-triangle",style:(0,h.Tr)({borderTop:"10px solid "+l.color,visibility:l.visible})},null,4),(0,o.Lk)("div",{class:"tempo-label",style:(0,h.Tr)({visibility:l.visible})},"T"+(0,h.v_)(l.tempo),5)],36)}var Ge={props:{left:Number,tempo:Number,index:Number,color:String,visible:String},emits:["click"],setup(e,{emit:t}){const l=l=>{t("click",l,e.index)};return{clickMarker:l}}};const je=(0,Me.A)(Ge,[["render",ze],["__scopeId","data-v-3f9a78ee"]]);var Ue=je;const Ye=e=>((0,o.Qi)("data-v-4d484fe6"),e=e(),(0,o.jt)(),e),qe={class:"export-content"},Je=Ye((()=>(0,o.Lk)("h1",null,"Export",-1))),Qe={class:"flex-row"},Ze={class:"left-panel"},et=Ye((()=>(0,o.Lk)("div",{class:"track-header"},"Track",-1))),tt={class:"track-list"},lt=["checked","disabled","onChange"],nt={class:"right-panel"},ot={class:"output-settings"},at=Ye((()=>(0,o.Lk)("strong",null,"Output Settings",-1))),rt=Ye((()=>(0,o.Lk)("li",null,[(0,o.Lk)("input",{type:"radio",name:"format",checked:""}),(0,o.eW)(" Mabinogi MML@ Format ")],-1))),it=["disabled"],st=["value"],ut={class:"info-box"},ct=Ye((()=>(0,o.Lk)("strong",null,"Information",-1))),ht=["onClick"],dt=["onClick"];function mt(e,t,l,a,r,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("button",{class:"export-button",onClick:t[0]||(t[0]=(...e)=>i.showExport&&i.showExport(...e))}," Export "),r.isExportVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-background",onClick:t[9]||(t[9]=(...e)=>i.hideExport&&i.hideExport(...e))},[(0,o.bF)(n.eB,{name:"fade"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",{class:"export-modal",onClick:t[8]||(t[8]=(0,n.D$)((()=>{}),["stop"]))},[(0,o.Lk)("button",{class:"close-button",onClick:t[1]||(t[1]=(...e)=>i.hideExport&&i.hideExport(...e))},"X"),(0,o.Lk)("div",qe,[Je,(0,o.Lk)("div",Qe,[(0,o.Lk)("div",Ze,[et,(0,o.Lk)("div",tt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tracks,((e,t)=>((0,o.uX)(),(0,o.CE)("label",{key:t},[(0,o.Lk)("input",{type:"checkbox",checked:i.isSelected(e),disabled:!i.isSelected(e)&&r.selectedTracks.length>=i.maxSelectable||i.trackHasPolyphony(e),onChange:t=>i.toggleTrack(e)},null,40,lt),(0,o.eW)(" "+(0,h.v_)(e.name)+" : "+(0,h.v_)(i.getRenderedTrackTokens(e,t).rendered.length)+" char(s) "+(0,h.v_)(i.trackHasPolyphony(e)?"*":""),1)])))),128))]),(0,o.Lk)("button",{class:"clear-btn",onClick:t[2]||(t[2]=(...e)=>i.clearSelection&&i.clearSelection(...e))},"Clear Selection")]),(0,o.Lk)("div",nt,[(0,o.Lk)("div",ot,[at,rt,(0,o.Lk)("li",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>r.sortTracksByLength=e),checked:""},null,512),[[n.lH,r.sortTracksByLength]]),(0,o.eW)(" Sort tracks by text length. ")]),(0,o.Lk)("li",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>r.excludeSongPart=e)},null,512),[[n.lH,r.excludeSongPart]]),(0,o.eW)(" Exclude Song Part ")]),(0,o.Lk)("li",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>r.jabSplit=e)},null,512),[[n.lH,r.jabSplit]]),(0,o.eW)(" Split Score for Jabs (WIP) ")]),(0,o.Lk)("li",null,[(0,o.bo)((0,o.Lk)("select",{id:"rank-select",disabled:!r.jabSplit,"onUpdate:modelValue":t[6]||(t[6]=e=>r.selectedRank=e),onChange:t[7]||(t[7]=(...e)=>i.changeComposeRank&&i.changeComposeRank(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.composeRanks,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:e}," Rank: "+(0,h.v_)(e.name)+" "+(0,h.v_)([e.melody,e.harmony1,e.harmony2]),9,st)))),128))],40,it),[[n.u1,r.selectedRank]])])]),(0,o.Lk)("div",ut,[ct,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.generatedScores,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"score-block"},[(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"Score "+(0,h.v_)(t+1)+":",1),(0,o.eW)(" Rank "+(0,h.v_)(e.rank)+" ",1),(0,o.Lk)("button",{onClick:e=>i.copyScore(t)},"📋",8,ht)]),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.parts,((e,l)=>((0,o.uX)(),(0,o.CE)("li",{key:l},[(0,o.eW)(" Part "+(0,h.v_)(l+1)+": "+(0,h.v_)(e.length)+" char(s) ",1),(0,o.Lk)("button",{onClick:e=>i.copyScorePiece(t,l)},"📋",8,dt)])))),128))])])))),128))])])])])])])),_:1})])):(0,o.Q3)("",!0)])}var pt={props:{tracks:Array,generateTokens:Function,renderTokens:Function,copyToClipboard:Function},data(){return{isExportVisible:!1,selectedTracks:[],excludeSongPart:!1,jabSplit:!1,sortTracksByLength:!0,composeRanks:[{name:"Impossible",melody:1/0,harmony1:1/0,harmony2:1/0},{name:"1",melody:1200,harmony1:800,harmony2:500},{name:"2",melody:1150,harmony1:700,harmony2:400},{name:"3",melody:1100,harmony1:600,harmony2:350},{name:"4",melody:1050,harmony1:550,harmony2:300},{name:"5",melody:1e3,harmony1:500,harmony2:250},{name:"6",melody:950,harmony1:450,harmony2:200},{name:"7",melody:900,harmony1:400,harmony2:200},{name:"8",melody:850,harmony1:400,harmony2:200},{name:"9",melody:800,harmony1:350,harmony2:200},{name:"A",melody:750,harmony1:300,harmony2:200},{name:"B",melody:700,harmony1:300,harmony2:200},{name:"C",melody:650,harmony1:250,harmony2:200},{name:"D",melody:600,harmony1:250,harmony2:150},{name:"E",melody:500,harmony1:200,harmony2:100},{name:"F",melody:400,harmony1:200,harmony2:100},{name:"Practice",melody:200,harmony1:100,harmony2:0}],selectedRank:{name:"1",melody:1200,harmony1:800,harmony2:500},selectedRankIndex:1,generatedScores:[],tokenCache:new Map}},computed:{maxSelectable(){return this.excludeSongPart?3:4}},watch:{excludeSongPart(e){const t=e?3:4;this.selectedTracks.length>t&&this.selectedTracks.splice(t),this.composeRanks=e?[{name:"Impossible",melody:1/0,harmony1:1/0,harmony2:1/0},{name:"1*",melody:1600,harmony1:1200,harmony2:900},{name:"2*",melody:1533,harmony1:1083,harmony2:783},{name:"3*",melody:1466,harmony1:966,harmony2:716},{name:"4*",melody:1400,harmony1:900,harmony2:650},{name:"5*",melody:1333,harmony1:833,harmony2:583},{name:"6*",melody:1266,harmony1:766,harmony2:516},{name:"7*",melody:1200,harmony1:700,harmony2:500},{name:"8*",melody:1133,harmony1:683,harmony2:483},{name:"9*",melody:1066,harmony1:616,harmony2:466},{name:"A*",melody:1e3,harmony1:550,harmony2:450},{name:"B*",melody:933,harmony1:533,harmony2:433},{name:"C*",melody:866,harmony1:466,harmony2:416},{name:"D*",melody:800,harmony1:450,harmony2:350},{name:"E*",melody:666,harmony1:366,harmony2:233},{name:"F*",melody:553,harmony1:333,harmony2:233},{name:"Practice*",melody:266,harmony1:166,harmony2:66}]:[{name:"Impossible",melody:1/0,harmony1:1/0,harmony2:1/0},{name:"1",melody:1200,harmony1:800,harmony2:500},{name:"2",melody:1150,harmony1:700,harmony2:400},{name:"3",melody:1100,harmony1:600,harmony2:350},{name:"4",melody:1050,harmony1:550,harmony2:300},{name:"5",melody:1e3,harmony1:500,harmony2:250},{name:"6",melody:950,harmony1:450,harmony2:200},{name:"7",melody:900,harmony1:400,harmony2:200},{name:"8",melody:850,harmony1:400,harmony2:200},{name:"9",melody:800,harmony1:350,harmony2:200},{name:"A",melody:750,harmony1:300,harmony2:200},{name:"B",melody:700,harmony1:300,harmony2:200},{name:"C",melody:650,harmony1:250,harmony2:200},{name:"D",melody:600,harmony1:250,harmony2:150},{name:"E",melody:500,harmony1:200,harmony2:100},{name:"F",melody:400,harmony1:200,harmony2:100},{name:"Practice",melody:200,harmony1:100,harmony2:0}],this.selectedRank=this.composeRanks[this.selectedRankIndex],this.generateScores()},jabSplit(){this.generateScores()},selectedRank(){this.generateScores()},sortTracksByLength(){this.generateScores()},tracks:{handler(){this.tokenCache.clear(),this.clearSelection()},deep:!0}},methods:{isSelected(e){return this.selectedTracks.includes(e)},toggleTrack(e){const t=this.selectedTracks.indexOf(e);-1!==t?this.selectedTracks.splice(t,1):this.selectedTracks.length<this.maxSelectable&&this.selectedTracks.push(e),this.generateScores()},trackHasPolyphony(e){for(let t=0;t<e.notes.length;++t){const l=e.notes[t],n=t+1<e.notes.length?e.notes[t+1]:null;if(null===n)return!1;if(l.left<=n.left+n.width)return!0}return!1},clearSelection(){this.selectedTracks=[],this.generateScores()},changeComposeRank(){this.selectedRankIndex=this.composeRanks.indexOf(this.selectedRank)},showExport(){this.isExportVisible=!0},hideExport(){this.isExportVisible=!1},getRenderedTrackTokens(e){if(this.tokenCache.has(e))return this.tokenCache.get(e);const t=this.generateTokens(e)[0],l=this.renderTokens(t),n={tokens:t,rendered:l};return this.tokenCache.set(e,n),n},splitTokensByLimit(e,t){const l=[];let n=[],o=0;for(let a=0;a<e.length;a++){const r=[...n,e[a]],i=this.renderTokens(r),s=i.length;s>t?n.length?(l.push(n),n=[e[a]],o=this.renderTokens(n).length):(l.push([e[a]]),n=[],o=0):(n.push(e[a]),o=s)}return n.length&&l.push(n),l},generateScores(){const e=[...this.selectedTracks];this.sortTracksByLength&&e.sort(((e,t)=>{const l=this.tracks.indexOf(e),n=this.tracks.indexOf(t);return this.getRenderedTrackTokens(t,n).rendered.length-this.getRenderedTrackTokens(e,l).rendered.length}));const t=this.excludeSongPart?3:4,l=e.map((e=>{const t=this.tracks.indexOf(e);return this.getRenderedTrackTokens(e,t).tokens})),n=e.map((e=>{const t=this.tracks.indexOf(e);return this.getRenderedTrackTokens(e,t).rendered})),o=[...this.composeRanks].reverse();if(this.generatedScores=[],this.jabSplit){const e=this.selectedRank,n=[e.melody,e.harmony1,e.harmony2,e.melody].slice(0,t),o=l.map(((e,t)=>this.splitTokensByLimit(e,n[t]))),a=Math.max(...o.map((e=>e.length)));for(let l=0;l<a;l++){const n=[];for(let e=0;e<t;e++){const t=o[e]?.[l]||[],a=this.renderTokens(t);n.push(a)}const a=n.every((e=>""===e));if(a)break;this.generatedScores.push({parts:n,rank:e.name})}}else for(const a of o){const e=[a.melody,a.harmony1,a.harmony2,a.melody].slice(0,t),l=n.every(((t,l)=>t.length<=e[l]));if(l){this.generatedScores.push({parts:n.slice(0,t),rank:a.name});break}}},copyScore(e){const t=this.generatedScores[e],l=`MML@${t.parts.join(",")};`;this.copyToClipboard(l)},copyScorePiece(e,t){const l=this.generatedScores[e];this.copyToClipboard(l.parts[t])}}};const vt=(0,Me.A)(pt,[["render",mt],["__scopeId","data-v-4d484fe6"]]);var ft=vt,kt={name:"PianoRoll",components:{HelpMenu:Ee,Tracks:_e,TempoMarker:Ue,ExportMenu:ft},setup(){const e="../MabiMML/",t=(0,c.KR)(null),l=(0,c.KR)(null),n=(0,c.KR)(null),a=(0,c.KR)(null),r=(0,c.KR)(!1),i=(0,c.KR)({name:"Lute",program:0,min:16,max:88}),s=(0,c.KR)(null),u=(0,c.KR)(120),h=(0,c.KR)(!1),d=(0,c.KR)(!1),m=(0,c.KR)(null),p=(0,c.KR)(window.innerWidth),v=(0,c.KR)([{name:"Lute",program:0,min:16,max:88},{name:"Ukulele",program:1,min:16,max:88},{name:"Mandolin",program:2,min:16,max:88},{name:"Whistle",program:3,min:12,max:88},{name:"Roncadora",program:4,min:12,max:88},{name:"Flute",program:5,min:15,max:88},{name:"Chalumeau",program:6,min:16,max:88},{name:"Tuba",program:18,min:12,max:95},{name:"Lyre",program:19,min:9,max:80},{name:"Electric Guitar",program:20,min:4,max:99},{name:"Piano",program:21,min:0,max:84},{name:"Violin",program:22,min:16,max:59},{name:"Cello",program:23,min:0,max:46},{name:"Harp",program:24,min:9,max:83},{name:"Tuned Violin",program:25,min:16,max:59},{name:"Tuned Cello",program:26,min:0,max:46},{name:"Drum Kit",program:27,min:29,max:53},{name:"Festival Lute",program:50,min:16,max:88},{name:"Festival Ukulele",program:51,min:16,max:88},{name:"Festival Mandolin",program:52,min:16,max:88},{name:"Fest/Tuned Whistle",program:53,min:12,max:83},{name:"Fest/Tuned Flute",program:54,min:15,max:83},{name:"Bass Drum",program:66,min:12,max:84},{name:"Snare Drum",program:67,min:12,max:84},{name:"Cymbals",program:68,min:12,max:84},{name:"Hand Chimes",program:77,min:9,max:80},{name:"Female Chorus",program:110,min:19,max:48},{name:"Male Chorus",program:100,min:14,max:46},{name:"Male Voice",program:120,min:17,max:49},{name:"Female Voice",program:121,min:12,max:45}]);let f=(0,c.KR)(16),k=(0,c.KR)(8);const g=(0,c.KR)(16),y=24,b=(0,c.KR)([]),L=(0,c.KR)([]),w=(0,c.KR)([]),T=(0,c.KR)([]),M=(0,c.KR)(0),x=(0,c.KR)(0),E=((0,c.KR)(0),(0,c.KR)(0),(0,c.KR)(0),(0,c.KR)(window.innerWidth)),C=(0,c.KR)(null),R=(0,c.KR)(0),S=(0,c.KR)([]),N=(0,c.KR)(!1),W=(0,c.KR)(0),K=(0,c.KR)(0),I=(0,c.KR)(null),O=(0,c.KR)(0),D=(0,c.KR)(0),X=(0,c.KR)([]),P=(0,c.KR)(null),F=(0,c.KR)(!1),H=(0,c.KR)(1),V=(0,o.EW)((()=>({left:`${Math.min(M.value,W.value)}px`,top:`${Math.min(x.value,K.value)+30}px`,width:`${Math.abs(W.value-M.value)}px`,height:`${Math.abs(K.value-x.value)}px`,backgroundColor:"rgba(0, 100, 255, 0.3)",border:"1px solid rgba(0, 100, 255, 0.5)"}))),$=(0,o.EW)((()=>({background:`repeating-linear-gradient( /*This is the horizontal lines*/\n                0deg,\n                #bbb,\n                #bbb 2px,\n                transparent 2px,\n                transparent 24px\n            ),\n            repeating-linear-gradient( /*This is the Bar line*/\n                90deg,\n                #777,\n                #777 2px,\n                transparent 2px,\n                transparent ${256*H.value}px\n            ),\n            repeating-linear-gradient( /*This is the vertical lines*/\n                90deg,\n                #c0c0c0,\n                #c0c0c0 2px,\n                transparent 2px,\n                transparent ${g.value*H.value}px\n            ),\n            repeating-linear-gradient(/*This is the background colors*/\n                90deg,\n                #e0e0e0,\n                #e0e0e0 ${64*H.value}px,\n                #ccc ${64*H.value}px,\n                #ccc ${128*H.value}px\n            )`})));let B=null;function _(){if(!B)return;const e=R.value,t=e+window.innerWidth,l=H.value,n=g.value,o=E.value*l,a=108*y,r=256/n;B.clearRect(0,0,o,a);const i=64*l;B.fillStyle="#e0e0e0";for(let k=0;k<=o;k+=2*i){const t=k-e;B.fillRect(t,0,i,a)}B.fillStyle="#ccc";for(let k=i;k<=o;k+=2*i){const t=k-e;B.fillRect(t,0,i,a)}B.strokeStyle="#bbb",B.lineWidth=2;const s=24,u=Math.ceil(a/s);B.beginPath();for(let k=0;k<=u;k++){const e=k*s;B.moveTo(0,e),B.lineTo(t,e)}if(B.stroke(),l>1/8){B.strokeStyle="#c0c0c0",B.lineWidth=2;let o=0;l>1/8&&l<=.5?o=12==r?4*n*l:8*n*l:l>.5&&l<=7/8?o=4*n*l:l>7/8&&l<2.5?o=2*n*l:l>=2.5&&(o=n*l);const i=Math.max(0,Math.floor(e/o)-1),s=Math.ceil(t/o)+1;B.beginPath();for(let t=i;t<=s;t++){const l=t*o-e;B.moveTo(l,0),B.lineTo(l,a)}B.stroke()}B.strokeStyle="#777",B.lineWidth=2;const c=256*l,h=Math.max(0,Math.floor(e/c)-1),d=Math.ceil(t/c)+1;B.beginPath();for(let k=h;k<=d;k++){const t=k*c-e;B.moveTo(t,0),B.lineTo(t,a)}B.stroke();const m=b.value;if(!m||0===m.length)return;const p=[],v=e/l,f=t/l;for(const k of m){const e=k.left,t=e+k.width;t<v||e>f||(k.muted||p.push(k))}for(const k of p){const t=k.left*l-e,n=k.top,o=(k.width+1)*l-1,a=y;B.fillStyle=dt(k.color,(k.volume+1)/15),B.fillRect(t,n,o,a),B.strokeStyle=k.highlighted?"white":k.color,B.lineWidth=k.highlighted?2:1,B.strokeRect(t,n,o,a);const r=Math.max(0,Math.min(6,o/4)),i=t+o/2,s=n+a+.35*r-1;B.beginPath(),B.arc(i,s,r,Math.PI,0,!1),B.fillStyle="rgba(0, 0, 0, 0.2)",B.fill();const u=Math.min(10,.4*o);B.fillRect(t+o-u,n,u,a),B.font="11px sans-serif",B.fillStyle="#444",B.textAlign="center",B.textBaseline="middle";const c=`${k.name} (${k.volume})`,h=z(B,c,o);h&&B.fillText(h,t+o/2,n+a/2)}}function z(e,t,l){const n="…";if(e.measureText(t).width<=l)return t;let o=t;while(o.length>0)if(o=o.slice(0,-1),e.measureText(o+n).width<=l)return o+n;return""}const G=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],j=["C#","D#","F#","G#","A#"],U=(0,c.KR)(G.map(((e,t)=>({name:e,index:t,isBlack:j.includes(e)})))),Y=(0,c.KR)([0,1,2,3,4,5,6,7,8]),q=(0,c.KR)(!1),J=(0,c.KR)(""),Q=(0,c.KR)(!1),Z=(0,c.KR)(""),ee=(0,c.KR)(16),te=(0,c.KR)(88);let le=[];(0,o.nT)((()=>{const e=Math.max(...b.value.map((e=>e.left+e.width)),0);E.value=Math.max(e+window.innerWidth/H.value,window.innerWidth/H.value),p.value=window.innerWidth,document.querySelector(".grid-wrapper")&&(R.value=C.value.scrollLeft)})),(0,o.wB)(b,(()=>{_()}),{deep:!0}),(0,o.wB)(E,(async()=>{await(0,o.dY)(),_()}),{deep:!0}),(0,o.wB)(g,(()=>{_()}),{deep:!0});const ne=(e,t,l)=>Pe.addTrack(null,e,t,l),oe=e=>{i.value=e.instrument,Ae.value=Fe.value.indexOf(e),$e(!0)},ae=async(e,t)=>{},re=async(e,t)=>{const l=new Set(e.notes.map((e=>e.id)));S.value=S.value.filter((e=>!l.has(e.id))),b.value=b.value.filter((e=>!l.has(e.id)));for(const n of Fe.value)n.notes=n.notes.filter((e=>!l.has(e.id)));X.value=X.value.filter((t=>t.parentTrack.id!==e.id))},ie=async e=>{F.value&&Ne();const t=Fe.value[e];for(const l of X.value)l.parentTrack===t&&(l.muted=t.isMuted)},se=(e,t)=>{for(const l of X.value)l.parentTrack===e&&(l.color=t)},ue=async()=>{try{const t=await fetch(e+"soundfonts/mabi_instruments_high_quality.sf3"),l=await t.arrayBuffer();return l}catch(t){return console.error("Failed to load SoundFont:",t),null}},ce=e=>{const t="Leave Site? Changes you made may not be saved.";return e.preventDefault(),e.returnValue=t,"message"};(0,o.sV)((async()=>{try{p.value=window.innerWidth;const t=document.querySelector(".grid-wrapper");t&&(C.value=t,t.addEventListener("scroll",Re),Re()),document.addEventListener("keydown",Ce),window.addEventListener("beforeunload",ce),a.value=new AudioContext,await a.value.audioWorklet.addModule(e+"worklet_processor.min.js");const l=await ue();if(!l)return;n.value=new A.gV(a.value.destination,l,!0,void 0,{chorusEnabled:!1,reverbEnabled:!1}),n.value.setMainVolume(2),n.value.setLogLevel(!1,!1,!1,!1),await n.value.isReady}catch(t){console.error("Error initializing sequencer or synthesizer:",t)}await(0,o.dY)(),m.value&&(B=m.value.getContext("2d",{alpha:!1}),_())})),(0,o.xo)((()=>{window.removeEventListener("beforeunload",ce)}));const he=e=>{0===e.button&&(e.shiftKey?de(e):pe(e))},de=e=>{const t=e.altKey?g.value/4:g.value,l=Math.round((e.clientX-I.value.getBoundingClientRect().left)/t/H.value)*t,n=prompt("Enter tempo (BPM):",u.value);null===n||isNaN(n)||""===n||X.value.push({left:l,tempo:Number(n),color:He.value.color,parentTrack:He.value,muted:!1})},me=(e,t)=>{if(e.preventDefault(),0===e.button){const e=prompt("Enter tempo (BPM):",X.value[t].tempo);if(null===e)return;isNaN(e)||""===e?X.value.splice(t,1):X.value[t].tempo=Number(e)}else 2===e.button&&(X.value[t].parentTrack=He.value,X.value[t].color=He.value.color)},pe=e=>{F&&Se(),Ee(e.clientX,e.altKey,!0),document.addEventListener("mousemove",ve),document.addEventListener("mouseup",fe)},ve=e=>{Ee(e.clientX,e.altKey,!0)},fe=async()=>{document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",fe)};let ke,ge,ye,be=0;async function Le(){F.value=!0,ge=O.value,ye=u.value,X.value.sort(((e,t)=>e.left-t.left)),we()}function we(){let e=0;be=0,ye=u.value;let t=X.value[be];while(t&&t.left<O.value)O.value>0&&(ye=t.tempo),be++,t=X.value[be];function l(){O.value<0&&(ye=u.value,be=0,e=0,ge=0,O.value=0),t=X.value[be];while(t&&t.muted)be++,t=X.value[be];t&&null!==t&&O.value>=t.left&&(be++,ge=O.value,e=P.value.currentTime,ye=t.tempo),O.value=4*(P.value.currentTime-e)*16*ye/60+ge,d.value&&(C.value.scrollLeft=O.value*H.value-.66*window.innerWidth),P.value&&!h.value&&(P.value.loop=h.value)}clearInterval(ke),l(),ke=setInterval(l,5)}function Te(e){let t="",l=e,n=[];for(let a=1;a<=64;++a)if(a<12||a%12===0||a%16===0){let e=Math.round(256/a*100),t=Math.round(256/a*150);n.push({length:t,name:"L"+a+"."}),n.push({length:e,name:"L"+a})}let o=Me(n,l);return t=o.noteCombination.map((e=>e.name)).join("&"),t}function Me(e,t){let l=Math.round(100*t);const n=new Array(l+1).fill(1/0);n[0]=0;const o=new Array(l+1).fill(-1);for(let i=1;i<=l;i++)for(const t of e){const e=t.length;i>=e&&n[i-e]+1<n[i]&&(n[i]=n[i-e]+1,o[i]=t)}if(n[l]===1/0)return{minNotes:null,noteCombination:[]};const a=[];let r=l;while(r>0){const e=o[r];a.push(e),r-=e.length}return{minNotes:n[l],noteCombination:a}}const xe=()=>{clearInterval(ke),F.value=!1},Ee=(e,t,l)=>{if(I.value){const n=I.value.getBoundingClientRect();let o=Math.round((e-n.left)/H.value/(g.value/4))*(g.value/4),a=g.value*(H.value<=.5?64/g.value:1);t||(o=Math.round(o/a)*a),o=Math.max(0,Math.min(E.value,o)),O.value=o,l&&(D.value=o)}};function Ce(e){if(!He.value.isEditingName){if("Backspace"===e.key||"Delete"===e.key){for(const e of S.value)Nt(e,!0);F.value&&Ne()}if("Space"===e.code)e.preventDefault(),F.value?(Se(),e.ctrlKey||(O.value=D.value)):Ne();else if("a"===e.key&&e.ctrlKey&&!He.value.isEditingName){e.preventDefault();for(const e of b.value)st(e);Ie(`Selected ${S.value.length} notes!`,1e3)}else if("ArrowUp"===e.key){if(e.ctrlKey||e.shiftKey){e.preventDefault();let t=e.ctrlKey?12:1;for(const e of S.value)if(e.top-y*t<-0)return;for(const e of S.value){e.top-=y*t;const l=(1284-e.top/2)/144,n=G[12*l%12]+""+Math.floor(l);e.name=n,e.pitch=12*l%12+12*(Math.floor(l)+1)}}}else if("ArrowDown"===e.key){if(e.ctrlKey||e.shiftKey){e.preventDefault();let t=e.ctrlKey?12:1;for(const e of S.value)if(e.top+y*t>=Y.value.length*y*12)return;for(const e of S.value){e.top+=y*t;const l=(1284-e.top/2)/144,n=G[12*l%12]+""+Math.floor(l);e.name=n,e.pitch=12*l%12+12*(Math.floor(l)+1)}}}else if("ArrowLeft"===e.key){if(e.ctrlKey||e.shiftKey){e.preventDefault();let t=e.ctrlKey?1:4;for(const e of S.value)if(Math.round(1e3*(e.left-g.value/t))/1e3<0)return;for(const e of S.value)e.left=Math.round(1e3*(e.left-g.value/t))/1e3}}else if("ArrowRight"===e.key){if(e.ctrlKey||e.shiftKey){e.preventDefault();let t=e.ctrlKey?1:4;for(const e of S.value)e.left=Math.round(1e3*(e.left+g.value/t))/1e3}}else if("c"===e.key&&e.ctrlKey){e.preventDefault(),le=[];for(const e of S.value)le.push(e);Ie(`Copied ${le.length} note${le.length>1?"s":""} to the clipboard!`,1e3)}else if("x"===e.key&&e.ctrlKey){e.preventDefault(),le=[];for(const e of S.value)le.push(e),Nt(e,!0);Ie(`Cut ${le.length} note${le.length>1?"s":""} and put them in the clipboard!`,1e3)}else if("v"===e.key&&e.ctrlKey){e.preventDefault(),nt();const t=Date.now(),l=He.value,n=l.color,o=R.value,a=H.value,r=g.value,i=b.value.length,s=[];for(let e=0;e<le.length;e++){const u=le[e],c={id:t+i+e,name:u.name,left:Math.round(4*Math.round((u.left+o/a)*r/4)/r),top:u.top,pitch:u.pitch,width:u.width,length:u.length,highlighted:!0,color:n,start:u.start,end:u.end,volume:u.volume,muted:!1,track:l};s.push(c)}S.value.push(...s),b.value.push(...s),l.notes.unshift(...s.reverse()),Ie(`Pasted ${le.length} notes from the clipboard!`,1e3)}else if("t"===e.key&&S.value.length>0){const e=new Set(S.value);for(const t of Fe.value)t.notes=t.notes.filter((t=>!e.has(t)));S.value.forEach((e=>{e.track=He.value,e.color=He.value.color})),He.value.notes.unshift(...[...S.value].reverse()),Ie(`Moved ${S.value.length} notes into track "${He.value.name}"!`,1e3)}}}function Re(){C.value&&I.value&&(R.value=C.value.scrollLeft,I.value.style.left=-R.value+"px"),_()}function Se(){P.value&&P.value.stop(),xe(),n.value.programChange(0,i.value.program)}const Ne=async(e=null)=>{try{if(e&&F.value)return Se(),void(O.value=D.value);const t=new A.Hm("untitled",480,u.value);if(await a.value.resume(),!n.value)return;let l=0,o=[];for(const e of Fe.value)e.isMuted||(o.push(e),t.addNewTrack(e.name+Fe.value.indexOf(e)));b.value.forEach((e=>{if(!e.muted&&e.left+e.width>=O.value){let n=e.track;const a=o.indexOf(n),r=a,i=e.pitch,s=e.left/16*120,u=(e.width+1)/16*120,c=O.value/16*120,h=Math.max(s,c)-c,d=Math.min(u,s+u-c),m=Math.max(0,Math.min(127,8*(e.volume+1)-1));t.addEvent(h,a,192|15&r,[n.instrument.program]),t.addNoteOn(h,a,r,i,m),t.addNoteOff(h+d-1,a,r,i),l++}}));for(const e of X.value){if(e.parentTrack.isMuted)continue;const l=e.left/16*120,n=O.value/16*120,o=Math.max(l,n)-n;t.addSetTempo(o,e.tempo)}if(0===l)return;t.flush(),s.value=t;const r=await(0,A.Nt)(s.value);P.value=new A.YC([{binary:r}],n.value),P.value.skipToFirstNoteOn=!1,P.value.loop=h.value&&0===O.value,await n.value.isReady,P.value.addOnSongEndedEvent((()=>{xe(),O.value=D.value,h.value&&!P.value.loop&&(O.value=0,Ne())}),"test2"),await P.value.play(),Le()}catch(t){console.error("Error playing sequence: ",t)}},We=async(e,t,l)=>{try{a.value.resume(),await n.value.isReady,n.value.noteOn(e,t.index+12*(l+1),Math.max(0,Math.min(127,8*(k.value+1)-1)),!1)}catch(o){console.error(o)}},Ke=async(e,t,l)=>{try{await n.value.isReady,n.value&&n.value.noteOff(e,t.index+12*(l+1))}catch(o){console.error(o)}},Ie=(e,t=2e3)=>{J.value=e,q.value=!0,setTimeout((()=>{q.value=!1}),t)},Oe=(e,t=2e3)=>{Z.value=e,Q.value=!0,setTimeout((()=>{Q.value=!1}),t)},De=(e,t,l)=>{r.value&&0===L.value.length&&0===w.value.length&&We(e,t,l)},Xe=(e,t,l)=>{r.value&&0===L.value.length&&0===w.value.length&&Ke(e,t,l)},$e=async(e=!1)=>{n.value&&i.value&&(He.value.instrument=i.value,ee.value=i.value.min,te.value=i.value.max,n.value.programChange(0,i.value.program),F.value&&!e&&Ne(),await n.value.isReady)},Be=new Map,_e=(e,t,l=!0)=>{if(t.preventDefault(),0===t.button&&0===w.value.length&&0===T.value.length){if(e.highlighted?L.value=S.value:(nt(),L.value.push(e)),t.shiftKey&&l){const e=Date.now(),t=b.value.length,l=[];for(let n=0;n<L.value.length;n++){const o=L.value[n],a={id:e+t+n,name:o.name,left:o.left,top:o.top,pitch:o.pitch,width:o.width,length:o.length,highlighted:!1,color:o.color,start:o.start,end:o.end,volume:o.volume,muted:!1,track:o.track};l.push(a)}b.value.push(...l),l.forEach((e=>{e.track.notes.unshift(e)}))}for(const e of L.value)Be.set(e.id,{x:t.clientX,y:t.clientY,left:e.left,top:e.top});f.value=e.length,k.value=e.volume,Ae.value=Fe.value.indexOf(e.track),Ve.value=e.track.color,document.addEventListener("mousemove",ze),document.addEventListener("mouseup",Ge)}},ze=e=>{if(L.value&&0===w.value.length&&0===T.value.length){let t=!1;const l=[];let n=!1;for(const r of L.value)if(e.altKey||r.highlighted&&r.left%g.value!==0){n=!0;break}const o=n?g.value/4:g.value;let a=0;for(let r=0;r<L.value.length;++r){const n=L.value[r],i=Be.get(n.id);if(!i)continue;const s=(e.clientX-i.x)/H.value,u=e.clientY-i.y;let c=0;0===r?(c=Math.round((i.left+s)/o)*o,a=c-i.left):c=i.left+a;let h=Math.round((i.top+u)/y)*y;if(c<0||h<0||h>2568){t=!0;break}l.push({note:n,newLeft:c,newTop:h})}if(t)return;for(const{note:e,newLeft:r,newTop:i}of l){e.left=r,e.top=i;const t=(1284-e.top/2)/144,l=G[12*t%12]+""+Math.floor(t);e.name!=l&&1===L.value.length&&(We(0,{name:l,index:12*t%12},Math.floor(t)),Ke(0,{name:l,index:12*t%12},Math.floor(t))),e.name=l,e.pitch=12*t%12+12*(Math.floor(t)+1)}}},Ge=()=>{F.value&&Ne(),L.value=[],document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",Ge),Be.clear()},je=new Map,Ue=(e,t)=>{t.preventDefault(),0===t.button&&(w.value=[],M.value=t.clientX,je.clear(),e.highlighted?(S.value.forEach((e=>{je.set(e.id,{width:e.width,startX:t.clientX})})),w.value=S.value):(nt(),je.set(e.id,{width:e.width,startX:t.clientX}),w.value=[e]),document.addEventListener("mousemove",Ye),document.addEventListener("mouseup",qe))},Ye=e=>{if(w.value.length>0){let t=!0;const l=[];if(w.value.forEach((n=>{const o=je.get(n.id);if(!o)return;const a=(e.clientX-o.startX)/H.value;let r=0;r=e.altKey?Math.round((o.width+a)/(g.value/4))*g.value/4-1:Math.round((o.width+a)/g.value)*g.value-1,r<g.value-1&&!e.altKey||r<3?t=!1:l.push({note:n,newWidth:r})})),t)for(const{note:e,newWidth:n}of l)e.width=n,e.length=(n+1)/g.value,f.value=e.length}},qe=()=>{w.value=[],je.clear(),document.removeEventListener("mousemove",Ye),document.removeEventListener("mouseup",qe)};let Je=[];const Qe=(e,t)=>{t.preventDefault(),0===t.button&&(T.value=[],x.value=t.clientY,e.highlighted?T.value=S.value:(nt(),T.value=[e]),Je=T.value.map((e=>e.volume)),document.addEventListener("mousemove",Ze),document.addEventListener("mouseup",et))},Ze=e=>{if(e.preventDefault(),T.value.length>0){let t=0;for(const l of T.value){const n=x.value-e.clientY;let o=Math.round(Math.max(1,Math.min(15,Je[t]+n/10)));l.volume=o,k.value=o,t++}}},et=()=>{T.value=[],F.value&&Ne(),document.removeEventListener("mousemove",Ze),document.removeEventListener("mouseup",et)},tt=e=>{e.ctrlKey&&L.value.length<=0&&0===e.button?(e.shiftKey||nt(),ot(e)):ct(e)},lt=e=>{const t=1*-Math.sign(e.deltaY)/8;if(e.ctrlKey){e.preventDefault();const l=H.value,n=C.value.scrollLeft,o=e.clientX-C.value.getBoundingClientRect().left+n;H.value=Math.min(8,Math.max(1/8,Math.round(8*(H.value+t))/8));const a=H.value;C.value.scrollLeft+=o*(a/l-1)}};function nt(){S.value.forEach((e=>{e.highlighted=!1})),S.value=[]}const ot=e=>{e.preventDefault(),N.value=!0;const t=m.value.getBoundingClientRect();M.value=e.clientX-t.left+R.value,x.value=e.clientY-t.top,W.value=e.clientX-t.left+R.value,K.value=e.clientY-t.top,document.addEventListener("mousemove",at),document.addEventListener("mouseup",rt)},at=e=>{if(N.value){const t=m.value.getBoundingClientRect();W.value=e.clientX-t.left+R.value,K.value=e.clientY-t.top}},rt=()=>{N.value&&(N.value=!1,document.removeEventListener("mousemove",at),document.removeEventListener("mouseup",rt),it())};function it(){const e={left:Math.min(M.value,W.value)/H.value,top:Math.min(x.value,K.value),right:Math.max(M.value,W.value)/H.value,bottom:Math.max(x.value,K.value)};b.value.forEach((t=>{const l={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+y};ut(e,l)&&st(t)}))}function st(e){S.value.includes(e)||e.muted||(S.value.push(e),e.highlighted=!0)}function ut(e,t){return!(t.left>=e.right||t.right<=e.left||t.top>=e.bottom||t.bottom<=e.top)}const ct=e=>{if(L.value.length>0||w.value.length>0||T.value.length>0)return;const t=m.value.getBoundingClientRect(),n=(e.clientX-t.left+R.value)/H.value,o=e.clientY-t.top+l.value.scrollTop;let a=Math.round((n-g.value/2)/g.value)*g.value;e.altKey&&(a=Math.round((n-g.value/8)/(g.value/4))*g.value/4);const r=Math.round((o-y/2)/y)*y,i=(1284-r/2)/144,s=G[12*i%12]+""+Math.floor(i);We(0,{name:s,index:12*i%12},Math.floor(i)),Ke(0,{name:s,index:12*i%12},Math.floor(i));const u=b.value.find((e=>e.left<=n&&n<=e.left+e.width+1&&e.top===r&&!e.muted));if(u)if(0===e.button){const t=Math.min(10,.4*(u.width+1))/H.value,l={x:u.left+(u.width+1)/2,y:u.top+y},a=((l.x-n)*H.value)**2+(l.y-o)**2,r=Math.min(6,(u.width+1)/4*H.value);n>=u.left+u.width-t&&n<=u.left+u.width+1?Ue(u,e):a<=r*r?Qe(u,e):_e(u,e)}else 2===e.button&&Nt(u,!1);else{if(0!==e.button)return;nt();const t=b.value.length+Date.now(),l={left:a,top:r,width:g.value*f.value-1,highlighted:!1,color:He.value?He.value.color:"hsla(212, 100%, 50%, 0.5)",id:t,name:s,pitch:12*i%12+12*(Math.floor(i)+1),length:f.value,start:a/g.value,end:a/g.value+f.value,volume:k.value,track:He.value};b.value.push(l),He.value.notes.unshift(l),_e(b.value.find((e=>e.id==t)),e,!1)}},ht=()=>{let e=[...He.value.notes].sort(((e,t)=>e.left===t.left?e.top-t.top:e.left-t.left)),t=[];t.push({notes:[],track:He.value,index:0});for(const l of e)for(const e of t){if(!e.notes[0]||e.notes[0].left+e.notes[0].width<l.left){e.notes.unshift(l);break}e.index===t.length-1&&t.push({notes:[],track:{instrument:e.track.instrument,color:null,name:He.value.name+` (${t.length})`},index:t.length})}if(Fe.value.length+t.length-1>16)Oe("Failed to split track! (Process would create too many tracks!)");else{Ie(`Successfully split the track "${He.value.name}" into ${t.length} tracks!`,3e3);for(const e of t){Fe.value.includes(e.track)||(e.track=ne(e.track.instrument,e.track.color,e.track.name)),e.track.notes=e.notes;for(const t of e.track.notes)t.track=e.track,t.color=e.track.color}}};function dt(e,t){let l=e.replace("#","");3===l.length&&(l=l.split("").map((e=>e+e)).join(""));const n=parseInt(l.substring(0,2),16),o=parseInt(l.substring(2,4),16),a=parseInt(l.substring(4,6),16);return`rgba(${n}, ${o}, ${a}, ${t})`}function mt(e){navigator.clipboard.writeText(e).then((()=>{J.value="MML copied to clipboard!",q.value=!0,setTimeout((()=>{q.value=!1}),2e3)})).catch((e=>{console.error("Could not copy text: ",e)}))}function pt(e){const t=[];for(let h=0;h<e.length;){const l=e[h];if("REST"===l.type||"NOTE"===l.type){const n=[l];h++;while(h<e.length&&"TIE"===e[h].type)n.push(e[h]),h++,h<e.length&&e[h].type===l.type&&(n.push(e[h]),h++);n.reverse(),t.push(n)}else h++}const l=t.length,n=Array.from({length:l+1},(()=>new Map)),o=Array.from({length:l+1},(()=>new Map));function a(e){const t=e[0],l=t.dotted?384/t.length:256/t.length,n=t.dotted?1:0,o="REST"===t.type?1:t.name.length;return{length:l,dotted:n,charLen:o}}n[0].set(4,0);for(let h=0;h<l;++h){const{length:e,dotted:l,charLen:r}=a(t[h]);for(const[t,a]of n[h]){const i=e===t;let s=r;i||(s+=String(e).length+l);let u=a+s;(!n[h+1].has(t)||u<n[h+1].get(t))&&(n[h+1].set(t,u),o[h+1].set(t,[t,"keep"]));let c=a+r+String(e).length+1+l;(!n[h+1].has(e)||c<n[h+1].get(e))&&(n[h+1].set(e,c),o[h+1].set(e,[t,"change"]))}}let r=null,i=1/0;for(const[h,d]of n[l])d<i&&(i=d,r=h);const s=[];let u=r,c=l;while(c>0){const[e,l]=o[c].get(u),n=t[c-1];for(const t of n)s.push(t);"change"===l&&s.push({type:"LENGTH",length:u,dotted:n[0].dotted,start:n[n.length-1].start}),u=e,c--}return s.reverse(),s}const vt=(e=null)=>{const t=[e]||0;if(null===t[0]||0===t)return;const l=[];for(const n of t){let e=[];for(const l of n.notes){const t=Te(l.width+1).split("&"),n=l.name.slice(0,l.name.length-1).toLowerCase();let o=0;for(let a=0;a<t.length;++a){const r=t[a].endsWith(".");let i=Math.floor(256/Number(t[a].slice(1,t[a].length)));r&&(i=Math.floor(1.5*i)),e.push({type:"NOTE",pitch:l.pitch-12,volume:l.volume,length:i,start:l.left+o,octave:Math.floor((l.pitch-12)/12),name:n,dotted:r}),o+=i,a!==t.length-1&&e.push({type:"TIE",pitch:l.pitch-12,start:l.left+o})}}e.sort(((e,t)=>e.start-t.start));for(let l=-1;l<e.length-1;++l){const t=l>-1?e[l]:{type:"NOTE",length:0,start:0},n=e[l+1];if("NOTE"!=t.type||"NOTE"!=n.type)continue;const o=n.start-(t.start+t.length);if(o>0){const n=Te(o).split("&");let a=0;for(let o=0;o<n.length;++o){const r=n[o].endsWith(".");let i=Math.floor(256/Number(n[o].slice(1,n[o].length)));r&&(i=Math.floor(1.5*i)),e.splice(l+o+1,0,{type:"REST",length:i,start:t.start+t.length+a,dotted:r})}++l}}e=pt(e);let t=4,o=4,a=!1;for(let l=0;l<e.length;l++){const n=e[l];if("LENGTH"===n.type){o=n.length,a=n.dotted;continue}if("NOTE"!==n.type||n.name.startsWith("n"))continue;let r,i=n.octave-t,s=Math.abs(i);if(1!==s||e[l+1]&&e[l+1].octave!==t||(i<0&&"b"===n.name?(n.name="c-",n.octave+=1,i=0,s=0):i>0&&"c"===n.name&&(n.name="b#",n.octave-=1,i=0,s=0)),t=n.octave,r=s>2?`o${n.octave}`:(""+(i<0?"<":">")).repeat(s),e[l+1]&&e[l+2]&&"NOTE"===e[l+1].type&&"NOTE"===e[l+2].type&&e[l+1].octave!==n.octave&&e[l+2].octave===n.octave){const t=e[l+1],r=t.dotted?384/t.length:256/t.length;if(1===Math.abs(n.pitch-t.pitch)){const e=n.pitch-t.pitch;t.octave+=e,t.name=e<0?n.name+"#":n.name+"-",l++;continue}t.name.length>1&&r===o&&t.dotted===a&&(t.name=`n${t.pitch}`)}""!==r&&(e.splice(l,0,{type:"OCTAVE",start:n.start,text:r}),l++)}let r=8;for(let l=0;l<e.length;++l){const t=e[l];"NOTE"===t.type&&t.volume!==r&&(r=t.volume,e.splice(l,0,{type:"VOLUME",start:t.start,volume:r}),l++)}const i=new Map;120!==u.value&&i.set(0,{parentTrack:n,tempo:u.value,left:0});for(const l of X.value)l.parentTrack===n&&i.set(l.left,l);for(const l of i.values())e.push({type:"TEMPO",tempo:l.tempo,start:l.left});e.sort(((e,t)=>e.start-t.start===0&&"TEMPO"===e.type?-1:e.start-t.start)),l.push(e)}return l};function ft(e){let t=[],l=4,n=!1;if(e){for(const o of e)if("LENGTH"===o.type)l=o.length,n=o.dotted,t.push(`L${l}${o.dotted?".":""}`);else if("TIE"===o.type)t.push("&");else if("OCTAVE"===o.type)t.push(o.text);else if("VOLUME"===o.type)t.push(`V${o.volume}`);else if("REST"===o.type){const e=o.dotted?384/o.length:256/o.length;e===l&&o.dotted===n?t.push("r"):e===l&&o.dotted?t.push("r."):t.push(`r${e}${o.dotted?".":""}`)}else if("NOTE"===o.type){const e=o.dotted?384/o.length:256/o.length;e===l&&o.dotted===n?t.push(o.name):e===l&&o.dotted?t.push(o.name,"."):t.push(`${o.name}${e}${o.dotted?".":""}`)}else"TEMPO"===o.type&&t.push(`T${o.tempo}`);return t.join("")}}const kt=()=>{for(const o of Fe.value)o.notes.sort(((e,t)=>e.left===t.left?e.top-t.top:e.left-t.left)),o.notes.reverse();let e="T"+u.value,t=[];for(const o of Fe.value)o.isMuted||t.push(o);for(const o of t)for(let e=0;e<o.notes.length;++e){let t=o.notes[e],l=e+1<o.notes.length?o.notes[e+1]:null;if(null===l)break;if(t.left<=l.left+l.width)return console.log("Could Not Gen MML"),Oe(`Failed to copy MML to clipboard! Track '${o.name}'' has overlapping notes!`),null}if(!(0<=t.length&&t.length<=4))return console.log("Could Not Gen MML"),Oe("Failed to copy MML to clipboard! Too many tracks visible!"),null;t.sort(((e,t)=>t.notes.length-e.notes.length));for(const o of t){let t=0,l=[];for(const e of X.value)e.parentTrack===o&&l.push(e);let n=[...l,...o.notes.slice().reverse()];n.sort(((e,t)=>e.left-t.left));for(const o of n){if(o.left>=t+4){let l=o.left-t,n=Te(l);n=n.replaceAll("L","R"),e+=n}if(o.width){let l=Te(o.width+1);if(l.includes("&")){let t=l.split("&");for(let l=0;l<t.length;++l)e+=t[l]+"V"+o.volume+"N"+(o.pitch-12)+(l===t.length-1?"":"&")}else e+=Te(o.width+1)+"V"+o.volume+"N"+(o.pitch-12);t=o.left+o.width+1}else e+="T"+o.tempo,t=o.left}e+=","}e=e.slice(0,-1);let l=e.split(","),n=[];for(const o of l){let e=bt(o),t=Lt(e),l=wt(t);n.push(l)}e=`MML@${n.join(",")};`,console.log(e),mt(e)};function gt(e){if(1===e.length)return e;let t=e[0],l=e[1],n=G.indexOf(t);return"#"===l||"+"===l?n=(n+1)%12:"-"===l&&(n=((n-1)%12+12)%12),G[n]}const yt={LENGTH:/L(\d+)\.?/g,NOTE:/[A-G][-+#]?\d*\.?|N\d+/g,REST:/R\d*\.?/g,TIE:/&/g,VOLUME:/V(\d+)/g,TEMPO:/T(\d+)/g,OCTAVE:/O(\d+)|[<>]/g};function bt(e){let t=[];for(const[l,n]of Object.entries(yt)){let o;while(null!==(o=n.exec(e)))t.push({type:l,value:o[0],index:o.index})}return t.sort(((e,t)=>e.index-t.index)),t}function Lt(e){let t=JSON.parse(JSON.stringify(e)),l=10;for(let n=0;n<l;++n){let e=4,l="4",n="120",o="8";for(let a=0;a<t.length;++a){let r=t[a];if("LENGTH"===r.type){let e=r.value.split("L")[1];e!==l?l=e:(t.splice(a,1),a--)}else if("VOLUME"===r.type){let e=r.value.split("V")[1];e!==o?o=e:(t.splice(a,1),a--)}else if("TEMPO"===r.type){let e=r.value.split("T")[1];e!==n?n=e:(t.splice(a,1),a--)}else if("REST"===r.type){let e=r.value.split("R")[1];e===l&&(r.value="R")}else if("NOTE"===r.type){if(!r.value.includes("N"))continue;let l=Number(r.value.split("N")[1]),n=Math.floor(l/12),o=G[l-12*n];if(n!==e){let l=n-e,i=[];if(Math.abs(l)<3){let e=l>0?">":"<";for(let t=0;t<Math.abs(l);++t)i.push({type:"OCTAVE",value:e,index:r.index+t})}else i=[{type:"OCTAVE",value:"O"+n,index:r.index}];t.splice(a,1,...i,{type:"NOTE",value:o,index:r.index+i.length}),e=n}else r.value=o}}for(let a=0;a<t.length;++a){let e=t[a],l=a>0?t[a-1]:null;if("LENGTH"===e.type){let n=0,o=[];for(let e=a+1;e<t.length;++e){let l=t[e];if("NOTE"!==l.type&&"REST"!==l.type||""!==l.value.replace(/[A-GRN][#]?/g,"")){if("LENGTH"===l.type)break}else n++,o.push(e)}if(l&&"TIE"===l.type||n*e.value.length<=e.value.length+n){for(const l of o)t[l].value=t[l].value+e.value.split("L")[1];t.splice(a,1)}}else"TEMPO"===e.type||e.type}}return t}function wt(e){let t="";for(const l of e)t+=l.value;return t}function Tt(e,t){let l=[...t],n=ne(v.value[10],null,e),o=4,a="4",r="120",i="8",s=0,u=null;for(let c=0;c<l.length;c++){let e=l[c];if("LENGTH"===e.type){let t=e.value.split("L")[1];t!==a&&(a=t)}else if("TIE"===e.type){if(null===u||null==l[c+1])continue;let e=l[c+1],t=a,n="C",r=o,i=0;if(e.value.startsWith("N")){i=Number(e.value.split("N")[1]),r=Math.floor(i/12),n=G[(i-12*r)%12];let l=t.includes(".");t=Number(t.slice(0,t.length-l))*(l?2/3:1)}else{let l=e.value.includes("#")||e.value.includes("+"),o=e.value.includes("-"),s=e.value.includes(".");n=gt(e.value.slice(0,1+l+o));let u=G.indexOf(n);if(11===u&&o&&(r-=1),0===u&&l&&(r+=1),e.value.length-s>1+l+o)t=Number(e.value.slice(l||o?2:1,e.value.length-s))*(s?2/3:1);else{let e=a.includes(".");s=e||s,t=Number(a.slice(0,a.length-e))*(s?2/3:1)}i=G.indexOf(n)+12*r}u.pitch-12===i&&(s+=256/t,u.width+=256/t,u.length+=t,u.end+=t,c++)}else if("OCTAVE"===e.type){let t=e.value;"<"===t?o-=1:">"===t?o+=1:o=Number(t.split("O")[1])}else if("VOLUME"===e.type){let t=e.value.split("V")[1];t!==i&&(i=t)}else if("TEMPO"===e.type){let t=e.value.split("T")[1];t!==r&&(r=t,X.value.push({left:s,tempo:Number(r),color:n.color,parentTrack:n,muted:!1}))}else if("REST"===e.type){let t=e.value.split("R")[1];if(t===a||0===Number(t)||isNaN(Number(t))){let e=a.includes(".")||t.includes("."),l=Number(a);s+=256/l*(e?1.5:1)}else{let e=t.includes("."),l=Number(t);s+=256/l*(e?1.5:1)}}else if("NOTE"===e.type){let t=a,l="C",r=o,c=0;if(e.value.startsWith("N")){c=Number(e.value.split("N")[1]),r=Math.floor(c/12),l=G[(c-12*r)%12];let n=t.includes(".");t=Number(t)*(n?2/3:1)}else{let n=e.value.includes("#")||e.value.includes("+"),o=e.value.includes("-"),i=e.value.includes(".");l=gt(e.value.slice(0,1+n+o));let s=G.indexOf(l);if(11===s&&o&&(r-=1),0===s&&n&&(r+=1),e.value.length-i>1+n+o)t=Number(e.value.slice(n||o?2:1,e.value.length))*(i?2/3:1);else{let e=a.includes(".");i=e||i,t=Number(a)*(i?2/3:1)}c=G.indexOf(l)+12*r}const h={left:s,top:2568-c*y,width:256/t-1,highlighted:!1,color:n.color,id:b.value.length+Date.now(),name:l+r,pitch:c+12,length:t,start:s,end:s+t,volume:Number(i),track:n};b.value.push(h),h.track.notes.unshift(h),s+=h.width+1,u=h}}}function Mt(e){const t=e.replace(/\s/,"").toUpperCase().match(/MML@([^;]+);/)[1].split(",");for(const l of t)l.length>0&&Tt(null,bt(l))}function xt(e){const t=e.split("\r\n");let l=[];for(let n=2;n<t.length;++n){let e=t[n].split(" : ");e.length<2||l.push({title:e[0].trim(),tokens:bt(e[1].trim().toUpperCase())})}for(const n of l)n.tokens.length>0&&Tt(n.title,n.tokens)}function Et(e){e.trim().startsWith("MML@")&&e.trim().endsWith(";")?Mt(e):xt(e)}function Ct(){const e=document.getElementById("hiddenFileInput");e.click();let t=async()=>{const l=e.files[0];if(e.removeEventListener("change",t),l){const e=new FileReader;e.onload=async function(e){const t=e.target.result;try{const e=new A.eu(t);await e.isReady;const l=e.timeDivision,n=(e.duration,e.tempoChanges.at(-2).tempo),o=Fe.value.length;e.tracks.forEach(((e,t)=>{const n=e.name||`Track ${t}`,o=[],a=[],r=[];let i=!1;e.forEach((e=>{const t=e.messageStatusByte,l=e.messageData,n=e.ticks;if(144===(240&t)&&l[1]>0)o.push({pitch:l[0],ticks:n,velocity:l[1]});else if(128===(240&t)||144===(240&t)&&0===l[1]){const e=l[0],t=n,s=o.findIndex((t=>t.pitch===e));if(-1!==s){const e=o.splice(s,1)[0];i?a.push({pitch:e.pitch,startTicks:e.ticks,velocity:e.velocity,originalEndTicks:t}):r.push({startTicks:e.ticks,pitch:e.pitch,duration:t-e.ticks,velocity:e.velocity})}}else if(176===(240&t)&&64===l[0]){const e=l[1],t=i;if(i=e>=64,t&&!i){for(const e of a)r.push({startTicks:e.startTicks,pitch:e.pitch,duration:n-e.startTicks,velocity:e.velocity});a.length=0}}}));for(const l of o)r.push({startTicks:l.ticks,pitch:l.pitch,duration:0,velocity:l.velocity});for(const l of a)r.push({startTicks:l.startTicks,pitch:l.pitch,duration:l.originalEndTicks-l.startTicks,velocity:l.velocity});if(0!==r.length){const e=ne(v.value[10],null,n);for(const t of r){const n=t.pitch-12,o=Math.floor(n/12),a=G[n%12],r=Math.round(t.duration/l*64)/64,i=4*Math.round(t.duration/l*64/4)-1,s=4*Math.round(t.startTicks/l*64/4),u=Math.floor(t.velocity/8),c={left:s,top:2568-n*y,width:i,highlighted:!1,color:e.color,id:b.value.length+Date.now(),name:a+o,pitch:n+12,length:r,start:s/16,end:s/16+r,volume:u,track:e};b.value.push(c),c.track.notes.unshift(c)}}})),u.value=Math.round(n);const a=[];let r=n,i=0;for(const t of e.tempoChanges){if(i++,Math.round(t.tempo)===r||0===t.ticks&&i===e.tempoChanges.length)continue;let n={left:4*Math.round(t.ticks/l*16),tempo:Math.round(t.tempo),color:Fe.value[o].color,parentTrack:Fe.value[o],muted:!1};a.push(n),r=Math.round(t.tempo)}X.value=[...X.value,...a]}catch(l){console.error("Error parsing MIDI file:",l)}},e.readAsArrayBuffer(l)}};e.addEventListener("change",t)}async function Rt(){const e=await navigator.clipboard.readText();Et(e),Ie("Successfully imported tracks from clipboard!",1e3)}function St(e){if(e&&2!==e.buttons)return;const t=m.value.getBoundingClientRect(),n=(e.clientX-t.left+R.value)/H.value,o=e.clientY-t.top+l.value.scrollTop;for(const l of b.value){const t=l.left,a=t+l.width,r=l.top,i=l.top+y,s=t<=n&&n<=a&&o>=r&&o<=i;s&&Nt(l,!1,e)}}const Nt=(e,t,l=null)=>{if(l&&2!==l.buttons)return;S.value=S.value.filter((t=>t.id!==e.id));let n=b.value.length;b.value=b.value.filter((t=>t.id!==e.id));b.value.length;for(const o of Fe.value)o.notes=o.notes.filter((t=>t.id!==e.id));!t&&F.value&&Ne()};return document.addEventListener("mousedown",(e=>{r.value=!0})),document.addEventListener("mouseup",(()=>{r.value=!1})),{notes:U,octaves:Y,startNote:We,endNote:Ke,mouseOverNote:De,mouseLeaveNote:Xe,instruments:v,selectedInstrument:i,changeInstrument:$e,pianoRoll:t,grid:l,notesInGrid:b,startDrag:_e,endDrag:Ge,startPlacingNote:ct,startVolumeChange:Qe,removeNote:Nt,gridWidth:g,gridHeight:y,gridSpan:E,startResize:Ue,endResize:qe,onResize:Ye,currentNoteLength:f,playSequence:Ne,tempo:u,handleGridClick:tt,handleGridScroll:lt,isSelecting:N,rectangleStyle:V,handleRulerClick:he,markerPosition:O,markerReplayPosition:D,ruler:I,loopSong:h,trackify:ht,tracks:Fe,noteWidthToMML:Te,backgroundStyle:$,genMML:kt,genTokensOutright:vt,renderTokens:ft,showSuccessNotification:q,successNotificationText:J,showFailedNotification:Q,failedNotificationText:Z,handleTrackSelected:oe,handleAddTrack:ae,handleRemoveTrack:re,handleMuteTrack:ie,instrKeyMin:ee,instrKeyMax:te,hexToRgba:dt,currentNoteVolume:k,clickTempoMarker:me,tempoMarkers:X,updateColor:se,zoomScalar:H,autoScrollSong:d,parseMMLFromClipboard:Rt,gridCanvas:m,windowWidth:p,scrollX:R,gridWrapper:C,tryRemoveNote:St,importMidi:Ct,copyToClipboard:mt}}};const gt=(0,Me.A)(kt,[["render",F],["__scopeId","data-v-1f39f2f4"]]);var yt=gt;var bt={name:"PatternEditor",components:{PianoRoll:yt},setup(){const e=(0,c.KR)(null);return{scrollContainer:e}}};const Lt=(0,Me.A)(bt,[["render",u],["__scopeId","data-v-f2d0b530"]]);var wt=Lt,Tt={name:"App",components:{PatternEditor:wt}};const Mt=(0,Me.A)(Tt,[["render",r]]);var xt=Mt;(0,n.Ef)(xt).mount("#app")}},t={};function l(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,l),a.exports}l.m=e,function(){var e=[];l.O=function(t,n,o,a){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],a=e[c][2];for(var i=!0,s=0;s<n.length;s++)(!1&a||r>=a)&&Object.keys(l.O).every((function(e){return l.O[e](n[s])}))?n.splice(s--,1):(i=!1,a<r&&(r=a));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,o,a]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.p="/MabiMML/"}(),function(){l.b=document.baseURI||self.location.href;var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,r=n[0],i=n[1],s=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)l.o(i,o)&&(l.m[o]=i[o]);if(s)var c=s(l)}for(t&&t(n);u<r.length;u++)a=r[u],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(c)},n=self["webpackChunkmusic_sequencer"]=self["webpackChunkmusic_sequencer"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=l.O(void 0,[504],(function(){return l(9182)}));n=l.O(n)})();
//# sourceMappingURL=app.c5382db0.js.map